{"ast":null,"code":"import { MethodNotImplementedError } from \"../errors\";\nimport Stream from \"./Stream\";\n/*\n * Copyright 2012 Mozilla Foundation\n *\n * The DecodeStream class contained in this file is a TypeScript port of the\n * JavaScript DecodeStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\n// Lots of DecodeStreams are created whose buffers are never used.  For these\n// we share a single empty buffer. This is (a) space-efficient and (b) avoids\n// having special cases that would be required if we used |null| for an empty\n// buffer.\nvar emptyBuffer = new Uint8Array(0);\n/**\n * Super class for the decoding streams\n */\nvar DecodeStream = /** @class */function () {\n  function DecodeStream(maybeMinBufferLength) {\n    this.pos = 0;\n    this.bufferLength = 0;\n    this.eof = false;\n    this.buffer = emptyBuffer;\n    this.minBufferLength = 512;\n    if (maybeMinBufferLength) {\n      // Compute the first power of two that is as big as maybeMinBufferLength.\n      while (this.minBufferLength < maybeMinBufferLength) {\n        this.minBufferLength *= 2;\n      }\n    }\n  }\n  Object.defineProperty(DecodeStream.prototype, \"isEmpty\", {\n    get: function () {\n      while (!this.eof && this.bufferLength === 0) {\n        this.readBlock();\n      }\n      return this.bufferLength === 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  DecodeStream.prototype.getByte = function () {\n    var pos = this.pos;\n    while (this.bufferLength <= pos) {\n      if (this.eof) {\n        return -1;\n      }\n      this.readBlock();\n    }\n    return this.buffer[this.pos++];\n  };\n  DecodeStream.prototype.getUint16 = function () {\n    var b0 = this.getByte();\n    var b1 = this.getByte();\n    if (b0 === -1 || b1 === -1) {\n      return -1;\n    }\n    return (b0 << 8) + b1;\n  };\n  DecodeStream.prototype.getInt32 = function () {\n    var b0 = this.getByte();\n    var b1 = this.getByte();\n    var b2 = this.getByte();\n    var b3 = this.getByte();\n    return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3;\n  };\n  DecodeStream.prototype.getBytes = function (length, forceClamped) {\n    if (forceClamped === void 0) {\n      forceClamped = false;\n    }\n    var end;\n    var pos = this.pos;\n    if (length) {\n      this.ensureBuffer(pos + length);\n      end = pos + length;\n      while (!this.eof && this.bufferLength < end) {\n        this.readBlock();\n      }\n      var bufEnd = this.bufferLength;\n      if (end > bufEnd) {\n        end = bufEnd;\n      }\n    } else {\n      while (!this.eof) {\n        this.readBlock();\n      }\n      end = this.bufferLength;\n    }\n    this.pos = end;\n    var subarray = this.buffer.subarray(pos, end);\n    // `this.buffer` is either a `Uint8Array` or `Uint8ClampedArray` here.\n    return forceClamped && !(subarray instanceof Uint8ClampedArray) ? new Uint8ClampedArray(subarray) : subarray;\n  };\n  DecodeStream.prototype.peekByte = function () {\n    var peekedByte = this.getByte();\n    this.pos--;\n    return peekedByte;\n  };\n  DecodeStream.prototype.peekBytes = function (length, forceClamped) {\n    if (forceClamped === void 0) {\n      forceClamped = false;\n    }\n    var bytes = this.getBytes(length, forceClamped);\n    this.pos -= bytes.length;\n    return bytes;\n  };\n  DecodeStream.prototype.skip = function (n) {\n    if (!n) {\n      n = 1;\n    }\n    this.pos += n;\n  };\n  DecodeStream.prototype.reset = function () {\n    this.pos = 0;\n  };\n  DecodeStream.prototype.makeSubStream = function (start, length /* dict */) {\n    var end = start + length;\n    while (this.bufferLength <= end && !this.eof) {\n      this.readBlock();\n    }\n    return new Stream(this.buffer, start, length /* dict */);\n  };\n\n  DecodeStream.prototype.decode = function () {\n    while (!this.eof) this.readBlock();\n    return this.buffer.subarray(0, this.bufferLength);\n  };\n  DecodeStream.prototype.readBlock = function () {\n    throw new MethodNotImplementedError(this.constructor.name, 'readBlock');\n  };\n  DecodeStream.prototype.ensureBuffer = function (requested) {\n    var buffer = this.buffer;\n    if (requested <= buffer.byteLength) {\n      return buffer;\n    }\n    var size = this.minBufferLength;\n    while (size < requested) {\n      size *= 2;\n    }\n    var buffer2 = new Uint8Array(size);\n    buffer2.set(buffer);\n    return this.buffer = buffer2;\n  };\n  return DecodeStream;\n}();\nexport default DecodeStream;","map":{"version":3,"names":["MethodNotImplementedError","Stream","emptyBuffer","Uint8Array","DecodeStream","maybeMinBufferLength","pos","bufferLength","eof","buffer","minBufferLength","Object","defineProperty","prototype","get","readBlock","enumerable","configurable","getByte","getUint16","b0","b1","getInt32","b2","b3","getBytes","length","forceClamped","end","ensureBuffer","bufEnd","subarray","Uint8ClampedArray","peekByte","peekedByte","peekBytes","bytes","skip","n","reset","makeSubStream","start","decode","constructor","name","requested","byteLength","size","buffer2","set"],"sources":["E:/PROA/frontPROA/node_modules/pdf-lib/es/core/streams/DecodeStream.js"],"sourcesContent":["import { MethodNotImplementedError } from \"../errors\";\nimport Stream from \"./Stream\";\n/*\n * Copyright 2012 Mozilla Foundation\n *\n * The DecodeStream class contained in this file is a TypeScript port of the\n * JavaScript DecodeStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\n// Lots of DecodeStreams are created whose buffers are never used.  For these\n// we share a single empty buffer. This is (a) space-efficient and (b) avoids\n// having special cases that would be required if we used |null| for an empty\n// buffer.\nvar emptyBuffer = new Uint8Array(0);\n/**\n * Super class for the decoding streams\n */\nvar DecodeStream = /** @class */ (function () {\n    function DecodeStream(maybeMinBufferLength) {\n        this.pos = 0;\n        this.bufferLength = 0;\n        this.eof = false;\n        this.buffer = emptyBuffer;\n        this.minBufferLength = 512;\n        if (maybeMinBufferLength) {\n            // Compute the first power of two that is as big as maybeMinBufferLength.\n            while (this.minBufferLength < maybeMinBufferLength) {\n                this.minBufferLength *= 2;\n            }\n        }\n    }\n    Object.defineProperty(DecodeStream.prototype, \"isEmpty\", {\n        get: function () {\n            while (!this.eof && this.bufferLength === 0) {\n                this.readBlock();\n            }\n            return this.bufferLength === 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DecodeStream.prototype.getByte = function () {\n        var pos = this.pos;\n        while (this.bufferLength <= pos) {\n            if (this.eof) {\n                return -1;\n            }\n            this.readBlock();\n        }\n        return this.buffer[this.pos++];\n    };\n    DecodeStream.prototype.getUint16 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        if (b0 === -1 || b1 === -1) {\n            return -1;\n        }\n        return (b0 << 8) + b1;\n    };\n    DecodeStream.prototype.getInt32 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        var b2 = this.getByte();\n        var b3 = this.getByte();\n        return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3;\n    };\n    DecodeStream.prototype.getBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var end;\n        var pos = this.pos;\n        if (length) {\n            this.ensureBuffer(pos + length);\n            end = pos + length;\n            while (!this.eof && this.bufferLength < end) {\n                this.readBlock();\n            }\n            var bufEnd = this.bufferLength;\n            if (end > bufEnd) {\n                end = bufEnd;\n            }\n        }\n        else {\n            while (!this.eof) {\n                this.readBlock();\n            }\n            end = this.bufferLength;\n        }\n        this.pos = end;\n        var subarray = this.buffer.subarray(pos, end);\n        // `this.buffer` is either a `Uint8Array` or `Uint8ClampedArray` here.\n        return forceClamped && !(subarray instanceof Uint8ClampedArray)\n            ? new Uint8ClampedArray(subarray)\n            : subarray;\n    };\n    DecodeStream.prototype.peekByte = function () {\n        var peekedByte = this.getByte();\n        this.pos--;\n        return peekedByte;\n    };\n    DecodeStream.prototype.peekBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.getBytes(length, forceClamped);\n        this.pos -= bytes.length;\n        return bytes;\n    };\n    DecodeStream.prototype.skip = function (n) {\n        if (!n) {\n            n = 1;\n        }\n        this.pos += n;\n    };\n    DecodeStream.prototype.reset = function () {\n        this.pos = 0;\n    };\n    DecodeStream.prototype.makeSubStream = function (start, length /* dict */) {\n        var end = start + length;\n        while (this.bufferLength <= end && !this.eof) {\n            this.readBlock();\n        }\n        return new Stream(this.buffer, start, length /* dict */);\n    };\n    DecodeStream.prototype.decode = function () {\n        while (!this.eof)\n            this.readBlock();\n        return this.buffer.subarray(0, this.bufferLength);\n    };\n    DecodeStream.prototype.readBlock = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'readBlock');\n    };\n    DecodeStream.prototype.ensureBuffer = function (requested) {\n        var buffer = this.buffer;\n        if (requested <= buffer.byteLength) {\n            return buffer;\n        }\n        var size = this.minBufferLength;\n        while (size < requested) {\n            size *= 2;\n        }\n        var buffer2 = new Uint8Array(size);\n        buffer2.set(buffer);\n        return (this.buffer = buffer2);\n    };\n    return DecodeStream;\n}());\nexport default DecodeStream;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
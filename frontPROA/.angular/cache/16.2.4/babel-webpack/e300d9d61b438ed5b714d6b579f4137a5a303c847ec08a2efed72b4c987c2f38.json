{"ast":null,"code":"import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, last } from \"../../utils\";\nvar PDFObjectStream = /** @class */function (_super) {\n  __extends(PDFObjectStream, _super);\n  function PDFObjectStream(context, objects, encode) {\n    if (encode === void 0) {\n      encode = true;\n    }\n    var _this = _super.call(this, context.obj({}), encode) || this;\n    _this.objects = objects;\n    _this.offsets = _this.computeObjectOffsets();\n    _this.offsetsString = _this.computeOffsetsString();\n    _this.dict.set(PDFName.of('Type'), PDFName.of('ObjStm'));\n    _this.dict.set(PDFName.of('N'), PDFNumber.of(_this.objects.length));\n    _this.dict.set(PDFName.of('First'), PDFNumber.of(_this.offsetsString.length));\n    return _this;\n  }\n  PDFObjectStream.prototype.getObjectsCount = function () {\n    return this.objects.length;\n  };\n  PDFObjectStream.prototype.clone = function (context) {\n    return PDFObjectStream.withContextAndObjects(context || this.dict.context, this.objects.slice(), this.encode);\n  };\n  PDFObjectStream.prototype.getContentsString = function () {\n    var value = this.offsetsString;\n    for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n      var _a = this.objects[idx],\n        object = _a[1];\n      value += object + \"\\n\";\n    }\n    return value;\n  };\n  PDFObjectStream.prototype.getUnencodedContents = function () {\n    var buffer = new Uint8Array(this.getUnencodedContentsSize());\n    var offset = copyStringIntoBuffer(this.offsetsString, buffer, 0);\n    for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n      var _a = this.objects[idx],\n        object = _a[1];\n      offset += object.copyBytesInto(buffer, offset);\n      buffer[offset++] = CharCodes.Newline;\n    }\n    return buffer;\n  };\n  PDFObjectStream.prototype.getUnencodedContentsSize = function () {\n    return this.offsetsString.length + last(this.offsets)[1] + last(this.objects)[1].sizeInBytes() + 1;\n  };\n  PDFObjectStream.prototype.computeOffsetsString = function () {\n    var offsetsString = '';\n    for (var idx = 0, len = this.offsets.length; idx < len; idx++) {\n      var _a = this.offsets[idx],\n        objectNumber = _a[0],\n        offset = _a[1];\n      offsetsString += objectNumber + \" \" + offset + \" \";\n    }\n    return offsetsString;\n  };\n  PDFObjectStream.prototype.computeObjectOffsets = function () {\n    var offset = 0;\n    var offsets = new Array(this.objects.length);\n    for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n      var _a = this.objects[idx],\n        ref = _a[0],\n        object = _a[1];\n      offsets[idx] = [ref.objectNumber, offset];\n      offset += object.sizeInBytes() + 1; // '\\n'\n    }\n\n    return offsets;\n  };\n  PDFObjectStream.withContextAndObjects = function (context, objects, encode) {\n    if (encode === void 0) {\n      encode = true;\n    }\n    return new PDFObjectStream(context, objects, encode);\n  };\n  return PDFObjectStream;\n}(PDFFlateStream);\nexport default PDFObjectStream;","map":{"version":3,"names":["__extends","PDFName","PDFNumber","PDFFlateStream","CharCodes","copyStringIntoBuffer","last","PDFObjectStream","_super","context","objects","encode","_this","call","obj","offsets","computeObjectOffsets","offsetsString","computeOffsetsString","dict","set","of","length","prototype","getObjectsCount","clone","withContextAndObjects","slice","getContentsString","value","idx","len","_a","object","getUnencodedContents","buffer","Uint8Array","getUnencodedContentsSize","offset","copyBytesInto","Newline","sizeInBytes","objectNumber","Array","ref"],"sources":["E:/PROA/frontPROA/node_modules/pdf-lib/es/core/structures/PDFObjectStream.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, last } from \"../../utils\";\nvar PDFObjectStream = /** @class */ (function (_super) {\n    __extends(PDFObjectStream, _super);\n    function PDFObjectStream(context, objects, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, context.obj({}), encode) || this;\n        _this.objects = objects;\n        _this.offsets = _this.computeObjectOffsets();\n        _this.offsetsString = _this.computeOffsetsString();\n        _this.dict.set(PDFName.of('Type'), PDFName.of('ObjStm'));\n        _this.dict.set(PDFName.of('N'), PDFNumber.of(_this.objects.length));\n        _this.dict.set(PDFName.of('First'), PDFNumber.of(_this.offsetsString.length));\n        return _this;\n    }\n    PDFObjectStream.prototype.getObjectsCount = function () {\n        return this.objects.length;\n    };\n    PDFObjectStream.prototype.clone = function (context) {\n        return PDFObjectStream.withContextAndObjects(context || this.dict.context, this.objects.slice(), this.encode);\n    };\n    PDFObjectStream.prototype.getContentsString = function () {\n        var value = this.offsetsString;\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], object = _a[1];\n            value += object + \"\\n\";\n        }\n        return value;\n    };\n    PDFObjectStream.prototype.getUnencodedContents = function () {\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = copyStringIntoBuffer(this.offsetsString, buffer, 0);\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], object = _a[1];\n            offset += object.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return buffer;\n    };\n    PDFObjectStream.prototype.getUnencodedContentsSize = function () {\n        return (this.offsetsString.length +\n            last(this.offsets)[1] +\n            last(this.objects)[1].sizeInBytes() +\n            1);\n    };\n    PDFObjectStream.prototype.computeOffsetsString = function () {\n        var offsetsString = '';\n        for (var idx = 0, len = this.offsets.length; idx < len; idx++) {\n            var _a = this.offsets[idx], objectNumber = _a[0], offset = _a[1];\n            offsetsString += objectNumber + \" \" + offset + \" \";\n        }\n        return offsetsString;\n    };\n    PDFObjectStream.prototype.computeObjectOffsets = function () {\n        var offset = 0;\n        var offsets = new Array(this.objects.length);\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], ref = _a[0], object = _a[1];\n            offsets[idx] = [ref.objectNumber, offset];\n            offset += object.sizeInBytes() + 1; // '\\n'\n        }\n        return offsets;\n    };\n    PDFObjectStream.withContextAndObjects = function (context, objects, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFObjectStream(context, objects, encode);\n    };\n    return PDFObjectStream;\n}(PDFFlateStream));\nexport default PDFObjectStream;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
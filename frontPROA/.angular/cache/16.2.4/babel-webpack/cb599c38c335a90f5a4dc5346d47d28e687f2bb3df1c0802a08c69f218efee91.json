{"ast":null,"code":"import _asyncToGenerator from \"E:/PROA/frontPROA/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { PDFDocument } from 'pdf-lib';\nimport * as i0 from \"@angular/core\";\nexport let Anexo3DService = /*#__PURE__*/(() => {\n  class Anexo3DService {\n    constructor() {}\n    anexo3D(orgMilitar, construtor, opcao, embarcacao, servico) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const pdfBytes = yield fetch('assets/pdfanexos/Anexo3D-N211.pdf').then(res => res.arrayBuffer());\n          const pdfDoc = yield PDFDocument.load(pdfBytes);\n          const form = pdfDoc.getForm();\n          form.getTextField('orgmilitar').setText(orgMilitar.toUpperCase());\n          form.getTextField('nomeconstrutor').setText(construtor.toUpperCase());\n          form.getTextField('nomeembarcacao').setText(embarcacao.nomeEmbarcacao);\n          form.getTextField('construida_alterada').setText(opcao.toUpperCase());\n          form.getTextField('construida_alterada2').setText(opcao.toUpperCase());\n          form.getTextField('comprimentototal').setText(embarcacao.compTotal.toString());\n          form.getTextField('comprimentoperpend').setText(embarcacao.compPerpendicular.toString());\n          form.getTextField('bocamoldada').setText(embarcacao.bocaMoldada.toString());\n          form.getTextField('pontalmoldado').setText(embarcacao.pontalMoldado.toString());\n          form.getTextField('areanavegacao').setText(embarcacao.areaNavegacao);\n          const hoje = new Date();\n          const dia = hoje.getDate().toString().padStart(2, '0');\n          const mes = (hoje.getMonth() + 1).toString().padStart(2, '0'); //Os meses são baseados em zero, então é necessário adicionar 1.\n          const ano = hoje.getFullYear().toString();\n          switch (mes) {\n            case '01':\n              _this.mesextenso = 'Janeiro';\n              break;\n            case '02':\n              _this.mesextenso = 'Fevereiro';\n              break;\n            case '03':\n              _this.mesextenso = 'Março';\n              break;\n            case '04':\n              _this.mesextenso = 'Abril';\n              break;\n            case '05':\n              _this.mesextenso = 'Maio';\n              break;\n            case '06':\n              _this.mesextenso = 'Junho';\n              break;\n            case '07':\n              _this.mesextenso = 'Julho';\n              break;\n            case '08':\n              _this.mesextenso = 'Agosto';\n              break;\n            case '09':\n              _this.mesextenso = 'Setembro';\n              break;\n            case '10':\n              _this.mesextenso = 'Outubro';\n              break;\n            case '11':\n              _this.mesextenso = 'Novembro';\n              break;\n            case '12':\n              _this.mesextenso = 'Dezembro';\n              break;\n          }\n          form.getTextField('localdata').setText(embarcacao.cidade + ', ' + dia + ' de ' + _this.mesextenso + ' de ' + ano);\n          form.flatten();\n          const modifiedPdfBytes = yield pdfDoc.save();\n          if (!servico) {\n            _this.abrirPDFemJanela(modifiedPdfBytes);\n            console.log('PDF Criado!');\n          } else {\n            return modifiedPdfBytes;\n          }\n        } catch (err) {\n          console.error(err);\n        }\n      })();\n    }\n    abrirPDFemJanela(data) {\n      const blob = new Blob([data], {\n        type: 'application/pdf'\n      });\n      const url = window.URL.createObjectURL(blob);\n      window.open(url, '_blank');\n    }\n    static #_ = this.ɵfac = function Anexo3DService_Factory(t) {\n      return new (t || Anexo3DService)();\n    };\n    static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: Anexo3DService,\n      factory: Anexo3DService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return Anexo3DService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _asyncToGenerator from \"E:/PROA/frontPROA/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let FrontEmailService = /*#__PURE__*/(() => {\n  class FrontEmailService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'http://localhost:8080/api/email'; // Ajuste o endereço conforme necessário\n    }\n\n    enviarPDFsPorEmail(destinatario, assunto, mensagem, ...pdfs) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const formData = new FormData();\n        formData.append('destinatario', destinatario);\n        formData.append('assunto', assunto);\n        formData.append('mensagem', mensagem);\n        // Adiciona PDFs se houver\n        pdfs.forEach((pdfBytes, index) => {\n          const blob = new Blob([pdfBytes], {\n            type: 'application/pdf'\n          });\n          formData.append('anexos', new File([blob], `anexo-${index + 1}.pdf`));\n        });\n        try {\n          // Determina a URL do endpoint com base na presença de anexos\n          const endpoint = pdfs.length ? `${_this.apiUrl}/anexos` : `${_this.apiUrl}/enviar`;\n          // Envia o e-mail, com ou sem anexos\n          yield _this.http.post(endpoint, formData, {\n            responseType: 'text'\n          }).toPromise();\n          console.log('Email enviado com sucesso!');\n        } catch (error) {\n          console.error('Erro ao enviar email:', error);\n          throw new Error('Não foi possível enviar o email.');\n        }\n      })();\n    }\n    static #_ = this.ɵfac = function FrontEmailService_Factory(t) {\n      return new (t || FrontEmailService)(i0.ɵɵinject(i1.HttpClient));\n    };\n    static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: FrontEmailService,\n      factory: FrontEmailService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return FrontEmailService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
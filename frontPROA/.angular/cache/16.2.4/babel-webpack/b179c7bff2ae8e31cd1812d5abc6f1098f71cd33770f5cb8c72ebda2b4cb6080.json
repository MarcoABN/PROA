{"ast":null,"code":"import { __awaiter, __generator, __rest } from \"tslib\";\nimport { EncryptedPDFError, FontkitNotRegisteredError, ForeignPageError, RemovePageFromEmptyDocumentError } from \"./errors\";\nimport PDFEmbeddedPage from \"./PDFEmbeddedPage\";\nimport PDFFont from \"./PDFFont\";\nimport PDFImage from \"./PDFImage\";\nimport PDFPage from \"./PDFPage\";\nimport PDFForm from \"./form/PDFForm\";\nimport { PageSizes } from \"./sizes\";\nimport { CustomFontEmbedder, CustomFontSubsetEmbedder, JpegEmbedder, PageEmbeddingMismatchedContextError, PDFCatalog, PDFContext, PDFDict, PDFHexString, PDFName, PDFObjectCopier, PDFPageEmbedder, PDFPageLeaf, PDFPageTree, PDFParser, PDFStreamWriter, PDFString, PDFWriter, PngEmbedder, StandardFontEmbedder, UnexpectedObjectTypeError } from \"../core\";\nimport { ParseSpeeds } from \"./PDFDocumentOptions\";\nimport { assertIs, assertIsOneOfOrUndefined, assertOrUndefined, assertRange, Cache, canBeConvertedToUint8Array, encodeToBase64, isStandardFont, pluckIndices, range, toUint8Array } from \"../utils\";\nimport FileEmbedder, { AFRelationship } from \"../core/embedders/FileEmbedder\";\nimport PDFEmbeddedFile from \"./PDFEmbeddedFile\";\nimport PDFJavaScript from \"./PDFJavaScript\";\nimport JavaScriptEmbedder from \"../core/embedders/JavaScriptEmbedder\";\n/**\n * Represents a PDF document.\n */\nvar PDFDocument = /** @class */function () {\n  function PDFDocument(context, ignoreEncryption, updateMetadata) {\n    var _this = this;\n    /** The default word breaks used in PDFPage.drawText */\n    this.defaultWordBreaks = [' '];\n    this.computePages = function () {\n      var pages = [];\n      _this.catalog.Pages().traverse(function (node, ref) {\n        if (node instanceof PDFPageLeaf) {\n          var page = _this.pageMap.get(node);\n          if (!page) {\n            page = PDFPage.of(node, ref, _this);\n            _this.pageMap.set(node, page);\n          }\n          pages.push(page);\n        }\n      });\n      return pages;\n    };\n    this.getOrCreateForm = function () {\n      var acroForm = _this.catalog.getOrCreateAcroForm();\n      return PDFForm.of(acroForm, _this);\n    };\n    assertIs(context, 'context', [[PDFContext, 'PDFContext']]);\n    assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n    this.context = context;\n    this.catalog = context.lookup(context.trailerInfo.Root);\n    this.isEncrypted = !!context.lookup(context.trailerInfo.Encrypt);\n    this.pageCache = Cache.populatedBy(this.computePages);\n    this.pageMap = new Map();\n    this.formCache = Cache.populatedBy(this.getOrCreateForm);\n    this.fonts = [];\n    this.images = [];\n    this.embeddedPages = [];\n    this.embeddedFiles = [];\n    this.javaScripts = [];\n    if (!ignoreEncryption && this.isEncrypted) throw new EncryptedPDFError();\n    if (updateMetadata) this.updateInfoDict();\n  }\n  /**\n   * Load an existing [[PDFDocument]]. The input data can be provided in\n   * multiple formats:\n   *\n   * | Type          | Contents                                               |\n   * | ------------- | ------------------------------------------------------ |\n   * | `string`      | A base64 encoded string (or data URI) containing a PDF |\n   * | `Uint8Array`  | The raw bytes of a PDF                                 |\n   * | `ArrayBuffer` | The raw bytes of a PDF                                 |\n   *\n   * For example:\n   * ```js\n   * import { PDFDocument } from 'pdf-lib'\n   *\n   * // pdf=string\n   * const base64 =\n   *  'JVBERi0xLjcKJYGBgYEKCjUgMCBvYmoKPDwKL0ZpbHRlciAvRmxhdGVEZWNvZGUKL0xlbm' +\n   *  'd0aCAxMDQKPj4Kc3RyZWFtCniccwrhMlAAwaJ0Ln2P1Jyy1JLM5ERdc0MjCwUjE4WQNC4Q' +\n   *  '6cNlCFZkqGCqYGSqEJLLZWNuYGZiZmbkYuZsZmlmZGRgZmluDCQNzc3NTM2NzdzMXMxMjQ' +\n   *  'ztFEKyuEK0uFxDuAAOERdVCmVuZHN0cmVhbQplbmRvYmoKCjYgMCBvYmoKPDwKL0ZpbHRl' +\n   *  'ciAvRmxhdGVEZWNvZGUKL1R5cGUgL09ialN0bQovTiA0Ci9GaXJzdCAyMAovTGVuZ3RoID' +\n   *  'IxNQo+PgpzdHJlYW0KeJxVj9GqwjAMhu/zFHkBzTo3nCCCiiKIHPEICuJF3cKoSCu2E8/b' +\n   *  '20wPIr1p8v9/8kVhgilmGfawX2CGaVrgcAi0/bsy0lrX7IGWpvJ4iJYEN3gEmrrGBlQwGs' +\n   *  'HHO9VBX1wNrxAqMX87RBD5xpJuddqwd82tjAHxzV1U5LPgy52DKXWnr1Lheg+j/c/pzGVr' +\n   *  'iqV0VlwZPXGPCJjElw/ybkwUmeoWgxesDXGhHJC/D/iikp1Av80ptKU0FdBEe25pPihAM1' +\n   *  'u6ytgaaWfs2Hrz35CJT1+EWmAKZW5kc3RyZWFtCmVuZG9iagoKNyAwIG9iago8PAovU2l6' +\n   *  'ZSA4Ci9Sb290IDIgMCBSCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9UeXBlIC9YUmVmCi9MZW' +\n   *  '5ndGggMzgKL1cgWyAxIDIgMiBdCi9JbmRleCBbIDAgOCBdCj4+CnN0cmVhbQp4nBXEwREA' +\n   *  'EBAEsCwz3vrvRmOOyyOoGhZdutHN2MT55fIAVocD+AplbmRzdHJlYW0KZW5kb2JqCgpzdG' +\n   *  'FydHhyZWYKNTEwCiUlRU9G'\n   *\n   * const dataUri = 'data:application/pdf;base64,' + base64\n   *\n   * const pdfDoc1 = await PDFDocument.load(base64)\n   * const pdfDoc2 = await PDFDocument.load(dataUri)\n   *\n   * // pdf=Uint8Array\n   * import fs from 'fs'\n   * const uint8Array = fs.readFileSync('with_update_sections.pdf')\n   * const pdfDoc3 = await PDFDocument.load(uint8Array)\n   *\n   * // pdf=ArrayBuffer\n   * const url = 'https://pdf-lib.js.org/assets/with_update_sections.pdf'\n   * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n   * const pdfDoc4 = await PDFDocument.load(arrayBuffer)\n   *\n   * ```\n   *\n   * @param pdf The input data containing a PDF document.\n   * @param options The options to be used when loading the document.\n   * @returns Resolves with a document loaded from the input.\n   */\n  PDFDocument.load = function (pdf, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, ignoreEncryption, _b, parseSpeed, _c, throwOnInvalidObject, _d, updateMetadata, _e, capNumbers, bytes, context;\n      return __generator(this, function (_f) {\n        switch (_f.label) {\n          case 0:\n            _a = options.ignoreEncryption, ignoreEncryption = _a === void 0 ? false : _a, _b = options.parseSpeed, parseSpeed = _b === void 0 ? ParseSpeeds.Slow : _b, _c = options.throwOnInvalidObject, throwOnInvalidObject = _c === void 0 ? false : _c, _d = options.updateMetadata, updateMetadata = _d === void 0 ? true : _d, _e = options.capNumbers, capNumbers = _e === void 0 ? false : _e;\n            assertIs(pdf, 'pdf', ['string', Uint8Array, ArrayBuffer]);\n            assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n            assertIs(parseSpeed, 'parseSpeed', ['number']);\n            assertIs(throwOnInvalidObject, 'throwOnInvalidObject', ['boolean']);\n            bytes = toUint8Array(pdf);\n            return [4 /*yield*/, PDFParser.forBytesWithOptions(bytes, parseSpeed, throwOnInvalidObject, capNumbers).parseDocument()];\n          case 1:\n            context = _f.sent();\n            return [2 /*return*/, new PDFDocument(context, ignoreEncryption, updateMetadata)];\n        }\n      });\n    });\n  };\n  /**\n   * Create a new [[PDFDocument]].\n   * @returns Resolves with the newly created document.\n   */\n  PDFDocument.create = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, updateMetadata, context, pageTree, pageTreeRef, catalog;\n      return __generator(this, function (_b) {\n        _a = options.updateMetadata, updateMetadata = _a === void 0 ? true : _a;\n        context = PDFContext.create();\n        pageTree = PDFPageTree.withContext(context);\n        pageTreeRef = context.register(pageTree);\n        catalog = PDFCatalog.withContextAndPages(context, pageTreeRef);\n        context.trailerInfo.Root = context.register(catalog);\n        return [2 /*return*/, new PDFDocument(context, false, updateMetadata)];\n      });\n    });\n  };\n  /**\n   * Register a fontkit instance. This must be done before custom fonts can\n   * be embedded. See [here](https://github.com/Hopding/pdf-lib/tree/master#fontkit-installation)\n   * for instructions on how to install and register a fontkit instance.\n   *\n   * > You do **not** need to call this method to embed standard fonts.\n   *\n   * For example:\n   * ```js\n   * import { PDFDocument } from 'pdf-lib'\n   * import fontkit from '@pdf-lib/fontkit'\n   *\n   * const pdfDoc = await PDFDocument.create()\n   * pdfDoc.registerFontkit(fontkit)\n   * ```\n   *\n   * @param fontkit The fontkit instance to be registered.\n   */\n  PDFDocument.prototype.registerFontkit = function (fontkit) {\n    this.fontkit = fontkit;\n  };\n  /**\n   * Get the [[PDFForm]] containing all interactive fields for this document.\n   * For example:\n   * ```js\n   * const form = pdfDoc.getForm()\n   * const fields = form.getFields()\n   * fields.forEach(field => {\n   *   const type = field.constructor.name\n   *   const name = field.getName()\n   *   console.log(`${type}: ${name}`)\n   * })\n   * ```\n   * @returns The form for this document.\n   */\n  PDFDocument.prototype.getForm = function () {\n    var form = this.formCache.access();\n    if (form.hasXFA()) {\n      console.warn('Removing XFA form data as pdf-lib does not support reading or writing XFA');\n      form.deleteXFA();\n    }\n    return form;\n  };\n  /**\n   * Get this document's title metadata. The title appears in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const title = pdfDoc.getTitle()\n   * ```\n   * @returns A string containing the title of this document, if it has one.\n   */\n  PDFDocument.prototype.getTitle = function () {\n    var title = this.getInfoDict().lookup(PDFName.Title);\n    if (!title) return undefined;\n    assertIsLiteralOrHexString(title);\n    return title.decodeText();\n  };\n  /**\n   * Get this document's author metadata. The author appears in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const author = pdfDoc.getAuthor()\n   * ```\n   * @returns A string containing the author of this document, if it has one.\n   */\n  PDFDocument.prototype.getAuthor = function () {\n    var author = this.getInfoDict().lookup(PDFName.Author);\n    if (!author) return undefined;\n    assertIsLiteralOrHexString(author);\n    return author.decodeText();\n  };\n  /**\n   * Get this document's subject metadata. The subject appears in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const subject = pdfDoc.getSubject()\n   * ```\n   * @returns A string containing the subject of this document, if it has one.\n   */\n  PDFDocument.prototype.getSubject = function () {\n    var subject = this.getInfoDict().lookup(PDFName.Subject);\n    if (!subject) return undefined;\n    assertIsLiteralOrHexString(subject);\n    return subject.decodeText();\n  };\n  /**\n   * Get this document's keywords metadata. The keywords appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const keywords = pdfDoc.getKeywords()\n   * ```\n   * @returns A string containing the keywords of this document, if it has any.\n   */\n  PDFDocument.prototype.getKeywords = function () {\n    var keywords = this.getInfoDict().lookup(PDFName.Keywords);\n    if (!keywords) return undefined;\n    assertIsLiteralOrHexString(keywords);\n    return keywords.decodeText();\n  };\n  /**\n   * Get this document's creator metadata. The creator appears in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const creator = pdfDoc.getCreator()\n   * ```\n   * @returns A string containing the creator of this document, if it has one.\n   */\n  PDFDocument.prototype.getCreator = function () {\n    var creator = this.getInfoDict().lookup(PDFName.Creator);\n    if (!creator) return undefined;\n    assertIsLiteralOrHexString(creator);\n    return creator.decodeText();\n  };\n  /**\n   * Get this document's producer metadata. The producer appears in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const producer = pdfDoc.getProducer()\n   * ```\n   * @returns A string containing the producer of this document, if it has one.\n   */\n  PDFDocument.prototype.getProducer = function () {\n    var producer = this.getInfoDict().lookup(PDFName.Producer);\n    if (!producer) return undefined;\n    assertIsLiteralOrHexString(producer);\n    return producer.decodeText();\n  };\n  /**\n   * Get this document's creation date metadata. The creation date appears in\n   * the \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * const creationDate = pdfDoc.getCreationDate()\n   * ```\n   * @returns A Date containing the creation date of this document,\n   *          if it has one.\n   */\n  PDFDocument.prototype.getCreationDate = function () {\n    var creationDate = this.getInfoDict().lookup(PDFName.CreationDate);\n    if (!creationDate) return undefined;\n    assertIsLiteralOrHexString(creationDate);\n    return creationDate.decodeDate();\n  };\n  /**\n   * Get this document's modification date metadata. The modification date\n   * appears in the \"Document Properties\" section of most PDF readers.\n   * For example:\n   * ```js\n   * const modification = pdfDoc.getModificationDate()\n   * ```\n   * @returns A Date containing the modification date of this document,\n   *          if it has one.\n   */\n  PDFDocument.prototype.getModificationDate = function () {\n    var modificationDate = this.getInfoDict().lookup(PDFName.ModDate);\n    if (!modificationDate) return undefined;\n    assertIsLiteralOrHexString(modificationDate);\n    return modificationDate.decodeDate();\n  };\n  /**\n   * Set this document's title metadata. The title will appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setTitle('ðŸ¥š The Life of an Egg ðŸ³')\n   * ```\n   *\n   * To display the title in the window's title bar, set the\n   * `showInWindowTitleBar` option to `true` (works for _most_ PDF readers).\n   * For example:\n   * ```js\n   * pdfDoc.setTitle('ðŸ¥š The Life of an Egg ðŸ³', { showInWindowTitleBar: true })\n   * ```\n   *\n   * @param title The title of this document.\n   * @param options The options to be used when setting the title.\n   */\n  PDFDocument.prototype.setTitle = function (title, options) {\n    assertIs(title, 'title', ['string']);\n    var key = PDFName.of('Title');\n    this.getInfoDict().set(key, PDFHexString.fromText(title));\n    // Indicate that readers should display the title rather than the filename\n    if (options === null || options === void 0 ? void 0 : options.showInWindowTitleBar) {\n      var prefs = this.catalog.getOrCreateViewerPreferences();\n      prefs.setDisplayDocTitle(true);\n    }\n  };\n  /**\n   * Set this document's author metadata. The author will appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setAuthor('Humpty Dumpty')\n   * ```\n   * @param author The author of this document.\n   */\n  PDFDocument.prototype.setAuthor = function (author) {\n    assertIs(author, 'author', ['string']);\n    var key = PDFName.of('Author');\n    this.getInfoDict().set(key, PDFHexString.fromText(author));\n  };\n  /**\n   * Set this document's subject metadata. The subject will appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setSubject('ðŸ“˜ An Epic Tale of Woe ðŸ“–')\n   * ```\n   * @param subject The subject of this document.\n   */\n  PDFDocument.prototype.setSubject = function (subject) {\n    assertIs(subject, 'author', ['string']);\n    var key = PDFName.of('Subject');\n    this.getInfoDict().set(key, PDFHexString.fromText(subject));\n  };\n  /**\n   * Set this document's keyword metadata. These keywords will appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setKeywords(['eggs', 'wall', 'fall', 'king', 'horses', 'men'])\n   * ```\n   * @param keywords An array of keywords associated with this document.\n   */\n  PDFDocument.prototype.setKeywords = function (keywords) {\n    assertIs(keywords, 'keywords', [Array]);\n    var key = PDFName.of('Keywords');\n    this.getInfoDict().set(key, PDFHexString.fromText(keywords.join(' ')));\n  };\n  /**\n   * Set this document's creator metadata. The creator will appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setCreator('PDF App 9000 ðŸ¤–')\n   * ```\n   * @param creator The creator of this document.\n   */\n  PDFDocument.prototype.setCreator = function (creator) {\n    assertIs(creator, 'creator', ['string']);\n    var key = PDFName.of('Creator');\n    this.getInfoDict().set(key, PDFHexString.fromText(creator));\n  };\n  /**\n   * Set this document's producer metadata. The producer will appear in the\n   * \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setProducer('PDF App 9000 ðŸ¤–')\n   * ```\n   * @param producer The producer of this document.\n   */\n  PDFDocument.prototype.setProducer = function (producer) {\n    assertIs(producer, 'creator', ['string']);\n    var key = PDFName.of('Producer');\n    this.getInfoDict().set(key, PDFHexString.fromText(producer));\n  };\n  /**\n   * Set this document's language metadata. The language will appear in the\n   * \"Document Properties\" section of some PDF readers. For example:\n   * ```js\n   * pdfDoc.setLanguage('en-us')\n   * ```\n   *\n   * @param language An RFC 3066 _Language-Tag_ denoting the language of this\n   *                 document, or an empty string if the language is unknown.\n   */\n  PDFDocument.prototype.setLanguage = function (language) {\n    assertIs(language, 'language', ['string']);\n    var key = PDFName.of('Lang');\n    this.catalog.set(key, PDFString.of(language));\n  };\n  /**\n   * Set this document's creation date metadata. The creation date will appear\n   * in the \"Document Properties\" section of most PDF readers. For example:\n   * ```js\n   * pdfDoc.setCreationDate(new Date())\n   * ```\n   * @param creationDate The date this document was created.\n   */\n  PDFDocument.prototype.setCreationDate = function (creationDate) {\n    assertIs(creationDate, 'creationDate', [[Date, 'Date']]);\n    var key = PDFName.of('CreationDate');\n    this.getInfoDict().set(key, PDFString.fromDate(creationDate));\n  };\n  /**\n   * Set this document's modification date metadata. The modification date will\n   * appear in the \"Document Properties\" section of most PDF readers. For\n   * example:\n   * ```js\n   * pdfDoc.setModificationDate(new Date())\n   * ```\n   * @param modificationDate The date this document was last modified.\n   */\n  PDFDocument.prototype.setModificationDate = function (modificationDate) {\n    assertIs(modificationDate, 'modificationDate', [[Date, 'Date']]);\n    var key = PDFName.of('ModDate');\n    this.getInfoDict().set(key, PDFString.fromDate(modificationDate));\n  };\n  /**\n   * Get the number of pages contained in this document. For example:\n   * ```js\n   * const totalPages = pdfDoc.getPageCount()\n   * ```\n   * @returns The number of pages in this document.\n   */\n  PDFDocument.prototype.getPageCount = function () {\n    if (this.pageCount === undefined) this.pageCount = this.getPages().length;\n    return this.pageCount;\n  };\n  /**\n   * Get an array of all the pages contained in this document. The pages are\n   * stored in the array in the same order that they are rendered in the\n   * document. For example:\n   * ```js\n   * const pages = pdfDoc.getPages()\n   * pages[0]   // The first page of the document\n   * pages[2]   // The third page of the document\n   * pages[197] // The 198th page of the document\n   * ```\n   * @returns An array of all the pages contained in this document.\n   */\n  PDFDocument.prototype.getPages = function () {\n    return this.pageCache.access();\n  };\n  /**\n   * Get the page rendered at a particular `index` of the document. For example:\n   * ```js\n   * pdfDoc.getPage(0)   // The first page of the document\n   * pdfDoc.getPage(2)   // The third page of the document\n   * pdfDoc.getPage(197) // The 198th page of the document\n   * ```\n   * @returns The [[PDFPage]] rendered at the given `index` of the document.\n   */\n  PDFDocument.prototype.getPage = function (index) {\n    var pages = this.getPages();\n    assertRange(index, 'index', 0, pages.length - 1);\n    return pages[index];\n  };\n  /**\n   * Get an array of indices for all the pages contained in this document. The\n   * array will contain a range of integers from\n   * `0..pdfDoc.getPageCount() - 1`. For example:\n   * ```js\n   * const pdfDoc = await PDFDocument.create()\n   * pdfDoc.addPage()\n   * pdfDoc.addPage()\n   * pdfDoc.addPage()\n   *\n   * const indices = pdfDoc.getPageIndices()\n   * indices // => [0, 1, 2]\n   * ```\n   * @returns An array of indices for all pages contained in this document.\n   */\n  PDFDocument.prototype.getPageIndices = function () {\n    return range(0, this.getPageCount());\n  };\n  /**\n   * Remove the page at a given index from this document. For example:\n   * ```js\n   * pdfDoc.removePage(0)   // Remove the first page of the document\n   * pdfDoc.removePage(2)   // Remove the third page of the document\n   * pdfDoc.removePage(197) // Remove the 198th page of the document\n   * ```\n   * Once a page has been removed, it will no longer be rendered at that index\n   * in the document.\n   * @param index The index of the page to be removed.\n   */\n  PDFDocument.prototype.removePage = function (index) {\n    var pageCount = this.getPageCount();\n    if (this.pageCount === 0) throw new RemovePageFromEmptyDocumentError();\n    assertRange(index, 'index', 0, pageCount - 1);\n    this.catalog.removeLeafNode(index);\n    this.pageCount = pageCount - 1;\n  };\n  /**\n   * Add a page to the end of this document. This method accepts three\n   * different value types for the `page` parameter:\n   *\n   * | Type               | Behavior                                                                            |\n   * | ------------------ | ----------------------------------------------------------------------------------- |\n   * | `undefined`        | Create a new page and add it to the end of this document                            |\n   * | `[number, number]` | Create a new page with the given dimensions and add it to the end of this document  |\n   * | `PDFPage`          | Add the existing page to the end of this document                                   |\n   *\n   * For example:\n   * ```js\n   * // page=undefined\n   * const newPage = pdfDoc.addPage()\n   *\n   * // page=[number, number]\n   * import { PageSizes } from 'pdf-lib'\n   * const newPage1 = pdfDoc.addPage(PageSizes.A7)\n   * const newPage2 = pdfDoc.addPage(PageSizes.Letter)\n   * const newPage3 = pdfDoc.addPage([500, 750])\n   *\n   * // page=PDFPage\n   * const pdfDoc1 = await PDFDocument.create()\n   * const pdfDoc2 = await PDFDocument.load(...)\n   * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n   * pdfDoc1.addPage(existingPage)\n   * ```\n   *\n   * @param page Optionally, the desired dimensions or existing page.\n   * @returns The newly created (or existing) page.\n   */\n  PDFDocument.prototype.addPage = function (page) {\n    assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n    return this.insertPage(this.getPageCount(), page);\n  };\n  /**\n   * Insert a page at a given index within this document. This method accepts\n   * three different value types for the `page` parameter:\n   *\n   * | Type               | Behavior                                                                       |\n   * | ------------------ | ------------------------------------------------------------------------------ |\n   * | `undefined`        | Create a new page and insert it into this document                             |\n   * | `[number, number]` | Create a new page with the given dimensions and insert it into this document   |\n   * | `PDFPage`          | Insert the existing page into this document                                    |\n   *\n   * For example:\n   * ```js\n   * // page=undefined\n   * const newPage = pdfDoc.insertPage(2)\n   *\n   * // page=[number, number]\n   * import { PageSizes } from 'pdf-lib'\n   * const newPage1 = pdfDoc.insertPage(2, PageSizes.A7)\n   * const newPage2 = pdfDoc.insertPage(0, PageSizes.Letter)\n   * const newPage3 = pdfDoc.insertPage(198, [500, 750])\n   *\n   * // page=PDFPage\n   * const pdfDoc1 = await PDFDocument.create()\n   * const pdfDoc2 = await PDFDocument.load(...)\n   * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n   * pdfDoc1.insertPage(0, existingPage)\n   * ```\n   *\n   * @param index The index at which the page should be inserted (zero-based).\n   * @param page Optionally, the desired dimensions or existing page.\n   * @returns The newly created (or existing) page.\n   */\n  PDFDocument.prototype.insertPage = function (index, page) {\n    var pageCount = this.getPageCount();\n    assertRange(index, 'index', 0, pageCount);\n    assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n    if (!page || Array.isArray(page)) {\n      var dims = Array.isArray(page) ? page : PageSizes.A4;\n      page = PDFPage.create(this);\n      page.setSize.apply(page, dims);\n    } else if (page.doc !== this) {\n      throw new ForeignPageError();\n    }\n    var parentRef = this.catalog.insertLeafNode(page.ref, index);\n    page.node.setParent(parentRef);\n    this.pageMap.set(page.node, page);\n    this.pageCache.invalidate();\n    this.pageCount = pageCount + 1;\n    return page;\n  };\n  /**\n   * Copy pages from a source document into this document. Allows pages to be\n   * copied between different [[PDFDocument]] instances. For example:\n   * ```js\n   * const pdfDoc = await PDFDocument.create()\n   * const srcDoc = await PDFDocument.load(...)\n   *\n   * const copiedPages = await pdfDoc.copyPages(srcDoc, [0, 3, 89])\n   * const [firstPage, fourthPage, ninetiethPage] = copiedPages;\n   *\n   * pdfDoc.addPage(fourthPage)\n   * pdfDoc.insertPage(0, ninetiethPage)\n   * pdfDoc.addPage(firstPage)\n   * ```\n   * @param srcDoc The document from which pages should be copied.\n   * @param indices The indices of the pages that should be copied.\n   * @returns Resolves with an array of pages copied into this document.\n   */\n  PDFDocument.prototype.copyPages = function (srcDoc, indices) {\n    return __awaiter(this, void 0, void 0, function () {\n      var copier, srcPages, copiedPages, idx, len, srcPage, copiedPage, ref;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            assertIs(srcDoc, 'srcDoc', [[PDFDocument, 'PDFDocument']]);\n            assertIs(indices, 'indices', [Array]);\n            return [4 /*yield*/, srcDoc.flush()];\n          case 1:\n            _a.sent();\n            copier = PDFObjectCopier.for(srcDoc.context, this.context);\n            srcPages = srcDoc.getPages();\n            copiedPages = new Array(indices.length);\n            for (idx = 0, len = indices.length; idx < len; idx++) {\n              srcPage = srcPages[indices[idx]];\n              copiedPage = copier.copy(srcPage.node);\n              ref = this.context.register(copiedPage);\n              copiedPages[idx] = PDFPage.of(copiedPage, ref, this);\n            }\n            return [2 /*return*/, copiedPages];\n        }\n      });\n    });\n  };\n  /**\n   * Get a copy of this document.\n   *\n   * For example:\n   * ```js\n   * const srcDoc = await PDFDocument.load(...)\n   * const pdfDoc = await srcDoc.copy()\n   * ```\n   *\n   * > **NOTE:**  This method won't copy all information over to the new\n   * > document (acroforms, outlines, etc...).\n   *\n   * @returns Resolves with a copy this document.\n   */\n  PDFDocument.prototype.copy = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var pdfCopy, contentPages, idx, len;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, PDFDocument.create()];\n          case 1:\n            pdfCopy = _a.sent();\n            return [4 /*yield*/, pdfCopy.copyPages(this, this.getPageIndices())];\n          case 2:\n            contentPages = _a.sent();\n            for (idx = 0, len = contentPages.length; idx < len; idx++) {\n              pdfCopy.addPage(contentPages[idx]);\n            }\n            if (this.getAuthor() !== undefined) {\n              pdfCopy.setAuthor(this.getAuthor());\n            }\n            if (this.getCreationDate() !== undefined) {\n              pdfCopy.setCreationDate(this.getCreationDate());\n            }\n            if (this.getCreator() !== undefined) {\n              pdfCopy.setCreator(this.getCreator());\n            }\n            if (this.getModificationDate() !== undefined) {\n              pdfCopy.setModificationDate(this.getModificationDate());\n            }\n            if (this.getProducer() !== undefined) {\n              pdfCopy.setProducer(this.getProducer());\n            }\n            if (this.getSubject() !== undefined) {\n              pdfCopy.setSubject(this.getSubject());\n            }\n            if (this.getTitle() !== undefined) {\n              pdfCopy.setTitle(this.getTitle());\n            }\n            pdfCopy.defaultWordBreaks = this.defaultWordBreaks;\n            return [2 /*return*/, pdfCopy];\n        }\n      });\n    });\n  };\n  /**\n   * Add JavaScript to this document. The supplied `script` is executed when the\n   * document is opened. The `script` can be used to perform some operation\n   * when the document is opened (e.g. logging to the console), or it can be\n   * used to define a function that can be referenced later in a JavaScript\n   * action. For example:\n   * ```js\n   * // Show \"Hello World!\" in the console when the PDF is opened\n   * pdfDoc.addJavaScript(\n   *   'main',\n   *   'console.show(); console.println(\"Hello World!\");'\n   * );\n   *\n   * // Define a function named \"foo\" that can be called in JavaScript Actions\n   * pdfDoc.addJavaScript(\n   *   'foo',\n   *   'function foo() { return \"foo\"; }'\n   * );\n   * ```\n   * See the [JavaScript for Acrobat API Reference](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/js_api_reference.pdf)\n   * for details.\n   * @param name The name of the script. Must be unique per document.\n   * @param script The JavaScript to execute.\n   */\n  PDFDocument.prototype.addJavaScript = function (name, script) {\n    assertIs(name, 'name', ['string']);\n    assertIs(script, 'script', ['string']);\n    var embedder = JavaScriptEmbedder.for(script, name);\n    var ref = this.context.nextRef();\n    var javaScript = PDFJavaScript.of(ref, this, embedder);\n    this.javaScripts.push(javaScript);\n  };\n  /**\n   * Add an attachment to this document. Attachments are visible in the\n   * \"Attachments\" panel of Adobe Acrobat and some other PDF readers. Any\n   * type of file can be added as an attachment. This includes, but is not\n   * limited to, `.png`, `.jpg`, `.pdf`, `.csv`, `.docx`, and `.xlsx` files.\n   *\n   * The input data can be provided in multiple formats:\n   *\n   * | Type          | Contents                                                       |\n   * | ------------- | -------------------------------------------------------------- |\n   * | `string`      | A base64 encoded string (or data URI) containing an attachment |\n   * | `Uint8Array`  | The raw bytes of an attachment                                 |\n   * | `ArrayBuffer` | The raw bytes of an attachment                                 |\n   *\n   * For example:\n   * ```js\n   * // attachment=string\n   * await pdfDoc.attach('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...', 'cat_riding_unicorn.jpg', {\n   *   mimeType: 'image/jpeg',\n   *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n   *   creationDate: new Date('2019/12/01'),\n   *   modificationDate: new Date('2020/04/19'),\n   * })\n   * await pdfDoc.attach('data:image/jpeg;base64,/9j/4AAQ...', 'cat_riding_unicorn.jpg', {\n   *   mimeType: 'image/jpeg',\n   *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n   *   creationDate: new Date('2019/12/01'),\n   *   modificationDate: new Date('2020/04/19'),\n   * })\n   *\n   * // attachment=Uint8Array\n   * import fs from 'fs'\n   * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n   * await pdfDoc.attach(uint8Array, 'cat_riding_unicorn.jpg', {\n   *   mimeType: 'image/jpeg',\n   *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n   *   creationDate: new Date('2019/12/01'),\n   *   modificationDate: new Date('2020/04/19'),\n   * })\n   *\n   * // attachment=ArrayBuffer\n   * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n   * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n   * await pdfDoc.attach(arrayBuffer, 'cat_riding_unicorn.jpg', {\n   *   mimeType: 'image/jpeg',\n   *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n   *   creationDate: new Date('2019/12/01'),\n   *   modificationDate: new Date('2020/04/19'),\n   * })\n   * ```\n   *\n   * @param attachment The input data containing the file to be attached.\n   * @param name The name of the file to be attached.\n   * @returns Resolves when the attachment is complete.\n   */\n  PDFDocument.prototype.attach = function (attachment, name, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var bytes, embedder, ref, embeddedFile;\n      return __generator(this, function (_a) {\n        assertIs(attachment, 'attachment', ['string', Uint8Array, ArrayBuffer]);\n        assertIs(name, 'name', ['string']);\n        assertOrUndefined(options.mimeType, 'mimeType', ['string']);\n        assertOrUndefined(options.description, 'description', ['string']);\n        assertOrUndefined(options.creationDate, 'options.creationDate', [Date]);\n        assertOrUndefined(options.modificationDate, 'options.modificationDate', [Date]);\n        assertIsOneOfOrUndefined(options.afRelationship, 'options.afRelationship', AFRelationship);\n        bytes = toUint8Array(attachment);\n        embedder = FileEmbedder.for(bytes, name, options);\n        ref = this.context.nextRef();\n        embeddedFile = PDFEmbeddedFile.of(ref, this, embedder);\n        this.embeddedFiles.push(embeddedFile);\n        return [2 /*return*/];\n      });\n    });\n  };\n  /**\n   * Embed a font into this document. The input data can be provided in multiple\n   * formats:\n   *\n   * | Type            | Contents                                                |\n   * | --------------- | ------------------------------------------------------- |\n   * | `StandardFonts` | One of the standard 14 fonts                            |\n   * | `string`        | A base64 encoded string (or data URI) containing a font |\n   * | `Uint8Array`    | The raw bytes of a font                                 |\n   * | `ArrayBuffer`   | The raw bytes of a font                                 |\n   *\n   * For example:\n   * ```js\n   * // font=StandardFonts\n   * import { StandardFonts } from 'pdf-lib'\n   * const font1 = await pdfDoc.embedFont(StandardFonts.Helvetica)\n   *\n   * // font=string\n   * const font2 = await pdfDoc.embedFont('AAEAAAAVAQAABABQRFNJRx/upe...')\n   * const font3 = await pdfDoc.embedFont('data:font/opentype;base64,AAEAAA...')\n   *\n   * // font=Uint8Array\n   * import fs from 'fs'\n   * const font4 = await pdfDoc.embedFont(fs.readFileSync('Ubuntu-R.ttf'))\n   *\n   * // font=ArrayBuffer\n   * const url = 'https://pdf-lib.js.org/assets/ubuntu/Ubuntu-R.ttf'\n   * const ubuntuBytes = await fetch(url).then(res => res.arrayBuffer())\n   * const font5 = await pdfDoc.embedFont(ubuntuBytes)\n   * ```\n   * See also: [[registerFontkit]]\n   * @param font The input data for a font.\n   * @param options The options to be used when embedding the font.\n   * @returns Resolves with the embedded font.\n   */\n  PDFDocument.prototype.embedFont = function (font, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, subset, customName, features, embedder, bytes, fontkit, _b, ref, pdfFont;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            _a = options.subset, subset = _a === void 0 ? false : _a, customName = options.customName, features = options.features;\n            assertIs(font, 'font', ['string', Uint8Array, ArrayBuffer]);\n            assertIs(subset, 'subset', ['boolean']);\n            if (!isStandardFont(font)) return [3 /*break*/, 1];\n            embedder = StandardFontEmbedder.for(font, customName);\n            return [3 /*break*/, 7];\n          case 1:\n            if (!canBeConvertedToUint8Array(font)) return [3 /*break*/, 6];\n            bytes = toUint8Array(font);\n            fontkit = this.assertFontkit();\n            if (!subset) return [3 /*break*/, 3];\n            return [4 /*yield*/, CustomFontSubsetEmbedder.for(fontkit, bytes, customName, features)];\n          case 2:\n            _b = _c.sent();\n            return [3 /*break*/, 5];\n          case 3:\n            return [4 /*yield*/, CustomFontEmbedder.for(fontkit, bytes, customName, features)];\n          case 4:\n            _b = _c.sent();\n            _c.label = 5;\n          case 5:\n            embedder = _b;\n            return [3 /*break*/, 7];\n          case 6:\n            throw new TypeError('`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`');\n          case 7:\n            ref = this.context.nextRef();\n            pdfFont = PDFFont.of(ref, this, embedder);\n            this.fonts.push(pdfFont);\n            return [2 /*return*/, pdfFont];\n        }\n      });\n    });\n  };\n  /**\n   * Embed a standard font into this document.\n   * For example:\n   * ```js\n   * import { StandardFonts } from 'pdf-lib'\n   * const helveticaFont = pdfDoc.embedFont(StandardFonts.Helvetica)\n   * ```\n   * @param font The standard font to be embedded.\n   * @param customName The name to be used when embedding the font.\n   * @returns The embedded font.\n   */\n  PDFDocument.prototype.embedStandardFont = function (font, customName) {\n    assertIs(font, 'font', ['string']);\n    if (!isStandardFont(font)) {\n      throw new TypeError('`font` must be one of type `StandardFonts`');\n    }\n    var embedder = StandardFontEmbedder.for(font, customName);\n    var ref = this.context.nextRef();\n    var pdfFont = PDFFont.of(ref, this, embedder);\n    this.fonts.push(pdfFont);\n    return pdfFont;\n  };\n  /**\n   * Embed a JPEG image into this document. The input data can be provided in\n   * multiple formats:\n   *\n   * | Type          | Contents                                                      |\n   * | ------------- | ------------------------------------------------------------- |\n   * | `string`      | A base64 encoded string (or data URI) containing a JPEG image |\n   * | `Uint8Array`  | The raw bytes of a JPEG image                                 |\n   * | `ArrayBuffer` | The raw bytes of a JPEG image                                 |\n   *\n   * For example:\n   * ```js\n   * // jpg=string\n   * const image1 = await pdfDoc.embedJpg('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...')\n   * const image2 = await pdfDoc.embedJpg('data:image/jpeg;base64,/9j/4AAQ...')\n   *\n   * // jpg=Uint8Array\n   * import fs from 'fs'\n   * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n   * const image3 = await pdfDoc.embedJpg(uint8Array)\n   *\n   * // jpg=ArrayBuffer\n   * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n   * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n   * const image4 = await pdfDoc.embedJpg(arrayBuffer)\n   * ```\n   *\n   * @param jpg The input data for a JPEG image.\n   * @returns Resolves with the embedded image.\n   */\n  PDFDocument.prototype.embedJpg = function (jpg) {\n    return __awaiter(this, void 0, void 0, function () {\n      var bytes, embedder, ref, pdfImage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            assertIs(jpg, 'jpg', ['string', Uint8Array, ArrayBuffer]);\n            bytes = toUint8Array(jpg);\n            return [4 /*yield*/, JpegEmbedder.for(bytes)];\n          case 1:\n            embedder = _a.sent();\n            ref = this.context.nextRef();\n            pdfImage = PDFImage.of(ref, this, embedder);\n            this.images.push(pdfImage);\n            return [2 /*return*/, pdfImage];\n        }\n      });\n    });\n  };\n  /**\n   * Embed a PNG image into this document. The input data can be provided in\n   * multiple formats:\n   *\n   * | Type          | Contents                                                     |\n   * | ------------- | ------------------------------------------------------------ |\n   * | `string`      | A base64 encoded string (or data URI) containing a PNG image |\n   * | `Uint8Array`  | The raw bytes of a PNG image                                 |\n   * | `ArrayBuffer` | The raw bytes of a PNG image                                 |\n   *\n   * For example:\n   * ```js\n   * // png=string\n   * const image1 = await pdfDoc.embedPng('iVBORw0KGgoAAAANSUhEUgAAAlgAAAF3...')\n   * const image2 = await pdfDoc.embedPng('data:image/png;base64,iVBORw0KGg...')\n   *\n   * // png=Uint8Array\n   * import fs from 'fs'\n   * const uint8Array = fs.readFileSync('small_mario.png')\n   * const image3 = await pdfDoc.embedPng(uint8Array)\n   *\n   * // png=ArrayBuffer\n   * const url = 'https://pdf-lib.js.org/assets/small_mario.png'\n   * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n   * const image4 = await pdfDoc.embedPng(arrayBuffer)\n   * ```\n   *\n   * @param png The input data for a PNG image.\n   * @returns Resolves with the embedded image.\n   */\n  PDFDocument.prototype.embedPng = function (png) {\n    return __awaiter(this, void 0, void 0, function () {\n      var bytes, embedder, ref, pdfImage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            assertIs(png, 'png', ['string', Uint8Array, ArrayBuffer]);\n            bytes = toUint8Array(png);\n            return [4 /*yield*/, PngEmbedder.for(bytes)];\n          case 1:\n            embedder = _a.sent();\n            ref = this.context.nextRef();\n            pdfImage = PDFImage.of(ref, this, embedder);\n            this.images.push(pdfImage);\n            return [2 /*return*/, pdfImage];\n        }\n      });\n    });\n  };\n  /**\n   * Embed one or more PDF pages into this document.\n   *\n   * For example:\n   * ```js\n   * const pdfDoc = await PDFDocument.create()\n   *\n   * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n   * const sourcePdf = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n   *\n   * // Embed page 74 of `sourcePdf` into `pdfDoc`\n   * const [embeddedPage] = await pdfDoc.embedPdf(sourcePdf, [73])\n   * ```\n   *\n   * See [[PDFDocument.load]] for examples of the allowed input data formats.\n   *\n   * @param pdf The input data containing a PDF document.\n   * @param indices The indices of the pages that should be embedded.\n   * @returns Resolves with an array of the embedded pages.\n   */\n  PDFDocument.prototype.embedPdf = function (pdf, indices) {\n    if (indices === void 0) {\n      indices = [0];\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var srcDoc, _a, srcPages;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            assertIs(pdf, 'pdf', ['string', Uint8Array, ArrayBuffer, [PDFDocument, 'PDFDocument']]);\n            assertIs(indices, 'indices', [Array]);\n            if (!(pdf instanceof PDFDocument)) return [3 /*break*/, 1];\n            _a = pdf;\n            return [3 /*break*/, 3];\n          case 1:\n            return [4 /*yield*/, PDFDocument.load(pdf)];\n          case 2:\n            _a = _b.sent();\n            _b.label = 3;\n          case 3:\n            srcDoc = _a;\n            srcPages = pluckIndices(srcDoc.getPages(), indices);\n            return [2 /*return*/, this.embedPages(srcPages)];\n        }\n      });\n    });\n  };\n  /**\n   * Embed a single PDF page into this document.\n   *\n   * For example:\n   * ```js\n   * const pdfDoc = await PDFDocument.create()\n   *\n   * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n   * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n   * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n   * const sourcePdfPage = sourcePdfDoc.getPages()[73]\n   *\n   * const embeddedPage = await pdfDoc.embedPage(\n   *   sourcePdfPage,\n   *\n   *   // Clip a section of the source page so that we only embed part of it\n   *   { left: 100, right: 450, bottom: 330, top: 570 },\n   *\n   *   // Translate all drawings of the embedded page by (10, 200) units\n   *   [1, 0, 0, 1, 10, 200],\n   * )\n   * ```\n   *\n   * @param page The page to be embedded.\n   * @param boundingBox\n   * Optionally, an area of the source page that should be embedded\n   * (defaults to entire page).\n   * @param transformationMatrix\n   * Optionally, a transformation matrix that is always applied to the embedded\n   * page anywhere it is drawn.\n   * @returns Resolves with the embedded pdf page.\n   */\n  PDFDocument.prototype.embedPage = function (page, boundingBox, transformationMatrix) {\n    return __awaiter(this, void 0, void 0, function () {\n      var embeddedPage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n            return [4 /*yield*/, this.embedPages([page], [boundingBox], [transformationMatrix])];\n          case 1:\n            embeddedPage = _a.sent()[0];\n            return [2 /*return*/, embeddedPage];\n        }\n      });\n    });\n  };\n  /**\n   * Embed one or more PDF pages into this document.\n   *\n   * For example:\n   * ```js\n   * const pdfDoc = await PDFDocument.create()\n   *\n   * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n   * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n   * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n   *\n   * const page1 = sourcePdfDoc.getPages()[0]\n   * const page2 = sourcePdfDoc.getPages()[52]\n   * const page3 = sourcePdfDoc.getPages()[73]\n   *\n   * const embeddedPages = await pdfDoc.embedPages([page1, page2, page3])\n   * ```\n   *\n   * @param page\n   * The pages to be embedded (they must all share the same context).\n   * @param boundingBoxes\n   * Optionally, an array of clipping boundaries - one for each page\n   * (defaults to entirety of each page).\n   * @param transformationMatrices\n   * Optionally, an array of transformation matrices - one for each page\n   * (each page's transformation will apply anywhere it is drawn).\n   * @returns Resolves with an array of the embedded pdf pages.\n   */\n  PDFDocument.prototype.embedPages = function (pages, boundingBoxes, transformationMatrices) {\n    if (boundingBoxes === void 0) {\n      boundingBoxes = [];\n    }\n    if (transformationMatrices === void 0) {\n      transformationMatrices = [];\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var idx, len, currPage, nextPage, context, maybeCopyPage, embeddedPages, idx, len, page, box, matrix, embedder, ref;\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (pages.length === 0) return [2 /*return*/, []];\n            // Assert all pages have the same context\n            for (idx = 0, len = pages.length - 1; idx < len; idx++) {\n              currPage = pages[idx];\n              nextPage = pages[idx + 1];\n              if (currPage.node.context !== nextPage.node.context) {\n                throw new PageEmbeddingMismatchedContextError();\n              }\n            }\n            context = pages[0].node.context;\n            maybeCopyPage = context === this.context ? function (p) {\n              return p;\n            } : PDFObjectCopier.for(context, this.context).copy;\n            embeddedPages = new Array(pages.length);\n            idx = 0, len = pages.length;\n            _b.label = 1;\n          case 1:\n            if (!(idx < len)) return [3 /*break*/, 4];\n            page = maybeCopyPage(pages[idx].node);\n            box = boundingBoxes[idx];\n            matrix = transformationMatrices[idx];\n            return [4 /*yield*/, PDFPageEmbedder.for(page, box, matrix)];\n          case 2:\n            embedder = _b.sent();\n            ref = this.context.nextRef();\n            embeddedPages[idx] = PDFEmbeddedPage.of(ref, this, embedder);\n            _b.label = 3;\n          case 3:\n            idx++;\n            return [3 /*break*/, 1];\n          case 4:\n            (_a = this.embeddedPages).push.apply(_a, embeddedPages);\n            return [2 /*return*/, embeddedPages];\n        }\n      });\n    });\n  };\n  /**\n   * > **NOTE:** You shouldn't need to call this method directly. The [[save]]\n   * > and [[saveAsBase64]] methods will automatically ensure that all embedded\n   * > assets are flushed before serializing the document.\n   *\n   * Flush all embedded fonts, PDF pages, and images to this document's\n   * [[context]].\n   *\n   * @returns Resolves when the flush is complete.\n   */\n  PDFDocument.prototype.flush = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.embedAll(this.fonts)];\n          case 1:\n            _a.sent();\n            return [4 /*yield*/, this.embedAll(this.images)];\n          case 2:\n            _a.sent();\n            return [4 /*yield*/, this.embedAll(this.embeddedPages)];\n          case 3:\n            _a.sent();\n            return [4 /*yield*/, this.embedAll(this.embeddedFiles)];\n          case 4:\n            _a.sent();\n            return [4 /*yield*/, this.embedAll(this.javaScripts)];\n          case 5:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  /**\n   * Serialize this document to an array of bytes making up a PDF file.\n   * For example:\n   * ```js\n   * const pdfBytes = await pdfDoc.save()\n   * ```\n   *\n   * There are a number of things you can do with the serialized document,\n   * depending on the JavaScript environment you're running in:\n   * * Write it to a file in Node or React Native\n   * * Download it as a Blob in the browser\n   * * Render it in an `iframe`\n   *\n   * @param options The options to be used when saving the document.\n   * @returns Resolves with the bytes of the serialized document.\n   */\n  PDFDocument.prototype.save = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, useObjectStreams, _b, addDefaultPage, _c, objectsPerTick, _d, updateFieldAppearances, form, Writer;\n      return __generator(this, function (_e) {\n        switch (_e.label) {\n          case 0:\n            _a = options.useObjectStreams, useObjectStreams = _a === void 0 ? true : _a, _b = options.addDefaultPage, addDefaultPage = _b === void 0 ? true : _b, _c = options.objectsPerTick, objectsPerTick = _c === void 0 ? 50 : _c, _d = options.updateFieldAppearances, updateFieldAppearances = _d === void 0 ? true : _d;\n            assertIs(useObjectStreams, 'useObjectStreams', ['boolean']);\n            assertIs(addDefaultPage, 'addDefaultPage', ['boolean']);\n            assertIs(objectsPerTick, 'objectsPerTick', ['number']);\n            assertIs(updateFieldAppearances, 'updateFieldAppearances', ['boolean']);\n            if (addDefaultPage && this.getPageCount() === 0) this.addPage();\n            if (updateFieldAppearances) {\n              form = this.formCache.getValue();\n              if (form) form.updateFieldAppearances();\n            }\n            return [4 /*yield*/, this.flush()];\n          case 1:\n            _e.sent();\n            Writer = useObjectStreams ? PDFStreamWriter : PDFWriter;\n            return [2 /*return*/, Writer.forContext(this.context, objectsPerTick).serializeToBuffer()];\n        }\n      });\n    });\n  };\n  /**\n   * Serialize this document to a base64 encoded string or data URI making up a\n   * PDF file. For example:\n   * ```js\n   * const base64String = await pdfDoc.saveAsBase64()\n   * base64String // => 'JVBERi0xLjcKJYGBgYEKC...'\n   *\n   * const base64DataUri = await pdfDoc.saveAsBase64({ dataUri: true })\n   * base64DataUri // => 'data:application/pdf;base64,JVBERi0xLjcKJYGBgYEKC...'\n   * ```\n   *\n   * @param options The options to be used when saving the document.\n   * @returns Resolves with a base64 encoded string or data URI of the\n   *          serialized document.\n   */\n  PDFDocument.prototype.saveAsBase64 = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, dataUri, otherOptions, bytes, base64;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = options.dataUri, dataUri = _a === void 0 ? false : _a, otherOptions = __rest(options, [\"dataUri\"]);\n            assertIs(dataUri, 'dataUri', ['boolean']);\n            return [4 /*yield*/, this.save(otherOptions)];\n          case 1:\n            bytes = _b.sent();\n            base64 = encodeToBase64(bytes);\n            return [2 /*return*/, dataUri ? \"data:application/pdf;base64,\" + base64 : base64];\n        }\n      });\n    });\n  };\n  PDFDocument.prototype.findPageForAnnotationRef = function (ref) {\n    var pages = this.getPages();\n    for (var idx = 0, len = pages.length; idx < len; idx++) {\n      var page = pages[idx];\n      var annotations = page.node.Annots();\n      if ((annotations === null || annotations === void 0 ? void 0 : annotations.indexOf(ref)) !== undefined) {\n        return page;\n      }\n    }\n    return undefined;\n  };\n  PDFDocument.prototype.embedAll = function (embeddables) {\n    return __awaiter(this, void 0, void 0, function () {\n      var idx, len;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            idx = 0, len = embeddables.length;\n            _a.label = 1;\n          case 1:\n            if (!(idx < len)) return [3 /*break*/, 4];\n            return [4 /*yield*/, embeddables[idx].embed()];\n          case 2:\n            _a.sent();\n            _a.label = 3;\n          case 3:\n            idx++;\n            return [3 /*break*/, 1];\n          case 4:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  PDFDocument.prototype.updateInfoDict = function () {\n    var pdfLib = \"pdf-lib (https://github.com/Hopding/pdf-lib)\";\n    var now = new Date();\n    var info = this.getInfoDict();\n    this.setProducer(pdfLib);\n    this.setModificationDate(now);\n    if (!info.get(PDFName.of('Creator'))) this.setCreator(pdfLib);\n    if (!info.get(PDFName.of('CreationDate'))) this.setCreationDate(now);\n  };\n  PDFDocument.prototype.getInfoDict = function () {\n    var existingInfo = this.context.lookup(this.context.trailerInfo.Info);\n    if (existingInfo instanceof PDFDict) return existingInfo;\n    var newInfo = this.context.obj({});\n    this.context.trailerInfo.Info = this.context.register(newInfo);\n    return newInfo;\n  };\n  PDFDocument.prototype.assertFontkit = function () {\n    if (!this.fontkit) throw new FontkitNotRegisteredError();\n    return this.fontkit;\n  };\n  return PDFDocument;\n}();\nexport default PDFDocument;\n/* tslint:disable-next-line only-arrow-functions */\nfunction assertIsLiteralOrHexString(pdfObject) {\n  if (!(pdfObject instanceof PDFHexString) && !(pdfObject instanceof PDFString)) {\n    throw new UnexpectedObjectTypeError([PDFHexString, PDFString], pdfObject);\n  }\n}","map":{"version":3,"names":["__awaiter","__generator","__rest","EncryptedPDFError","FontkitNotRegisteredError","ForeignPageError","RemovePageFromEmptyDocumentError","PDFEmbeddedPage","PDFFont","PDFImage","PDFPage","PDFForm","PageSizes","CustomFontEmbedder","CustomFontSubsetEmbedder","JpegEmbedder","PageEmbeddingMismatchedContextError","PDFCatalog","PDFContext","PDFDict","PDFHexString","PDFName","PDFObjectCopier","PDFPageEmbedder","PDFPageLeaf","PDFPageTree","PDFParser","PDFStreamWriter","PDFString","PDFWriter","PngEmbedder","StandardFontEmbedder","UnexpectedObjectTypeError","ParseSpeeds","assertIs","assertIsOneOfOrUndefined","assertOrUndefined","assertRange","Cache","canBeConvertedToUint8Array","encodeToBase64","isStandardFont","pluckIndices","range","toUint8Array","FileEmbedder","AFRelationship","PDFEmbeddedFile","PDFJavaScript","JavaScriptEmbedder","PDFDocument","context","ignoreEncryption","updateMetadata","_this","defaultWordBreaks","computePages","pages","catalog","Pages","traverse","node","ref","page","pageMap","get","of","set","push","getOrCreateForm","acroForm","getOrCreateAcroForm","lookup","trailerInfo","Root","isEncrypted","Encrypt","pageCache","populatedBy","Map","formCache","fonts","images","embeddedPages","embeddedFiles","javaScripts","updateInfoDict","load","pdf","options","_a","_b","parseSpeed","_c","throwOnInvalidObject","_d","_e","capNumbers","bytes","_f","label","Slow","Uint8Array","ArrayBuffer","forBytesWithOptions","parseDocument","sent","create","pageTree","pageTreeRef","withContext","register","withContextAndPages","prototype","registerFontkit","fontkit","getForm","form","access","hasXFA","console","warn","deleteXFA","getTitle","title","getInfoDict","Title","undefined","assertIsLiteralOrHexString","decodeText","getAuthor","author","Author","getSubject","subject","Subject","getKeywords","keywords","Keywords","getCreator","creator","Creator","getProducer","producer","Producer","getCreationDate","creationDate","CreationDate","decodeDate","getModificationDate","modificationDate","ModDate","setTitle","key","fromText","showInWindowTitleBar","prefs","getOrCreateViewerPreferences","setDisplayDocTitle","setAuthor","setSubject","setKeywords","Array","join","setCreator","setProducer","setLanguage","language","setCreationDate","Date","fromDate","setModificationDate","getPageCount","pageCount","getPages","length","getPage","index","getPageIndices","removePage","removeLeafNode","addPage","insertPage","isArray","dims","A4","setSize","apply","doc","parentRef","insertLeafNode","setParent","invalidate","copyPages","srcDoc","indices","copier","srcPages","copiedPages","idx","len","srcPage","copiedPage","flush","for","copy","pdfCopy","contentPages","addJavaScript","name","script","embedder","nextRef","javaScript","attach","attachment","embeddedFile","mimeType","description","afRelationship","embedFont","font","subset","customName","features","pdfFont","assertFontkit","TypeError","embedStandardFont","embedJpg","jpg","pdfImage","embedPng","png","embedPdf","embedPages","embedPage","boundingBox","transformationMatrix","embeddedPage","boundingBoxes","transformationMatrices","currPage","nextPage","maybeCopyPage","box","matrix","p","embedAll","save","useObjectStreams","addDefaultPage","objectsPerTick","updateFieldAppearances","Writer","getValue","forContext","serializeToBuffer","saveAsBase64","dataUri","otherOptions","base64","findPageForAnnotationRef","annotations","Annots","indexOf","embeddables","embed","pdfLib","now","info","existingInfo","Info","newInfo","obj","pdfObject"],"sources":["E:/PROA/frontPROA/node_modules/pdf-lib/es/api/PDFDocument.js"],"sourcesContent":["import { __awaiter, __generator, __rest } from \"tslib\";\nimport { EncryptedPDFError, FontkitNotRegisteredError, ForeignPageError, RemovePageFromEmptyDocumentError, } from \"./errors\";\nimport PDFEmbeddedPage from \"./PDFEmbeddedPage\";\nimport PDFFont from \"./PDFFont\";\nimport PDFImage from \"./PDFImage\";\nimport PDFPage from \"./PDFPage\";\nimport PDFForm from \"./form/PDFForm\";\nimport { PageSizes } from \"./sizes\";\nimport { CustomFontEmbedder, CustomFontSubsetEmbedder, JpegEmbedder, PageEmbeddingMismatchedContextError, PDFCatalog, PDFContext, PDFDict, PDFHexString, PDFName, PDFObjectCopier, PDFPageEmbedder, PDFPageLeaf, PDFPageTree, PDFParser, PDFStreamWriter, PDFString, PDFWriter, PngEmbedder, StandardFontEmbedder, UnexpectedObjectTypeError, } from \"../core\";\nimport { ParseSpeeds, } from \"./PDFDocumentOptions\";\nimport { assertIs, assertIsOneOfOrUndefined, assertOrUndefined, assertRange, Cache, canBeConvertedToUint8Array, encodeToBase64, isStandardFont, pluckIndices, range, toUint8Array, } from \"../utils\";\nimport FileEmbedder, { AFRelationship } from \"../core/embedders/FileEmbedder\";\nimport PDFEmbeddedFile from \"./PDFEmbeddedFile\";\nimport PDFJavaScript from \"./PDFJavaScript\";\nimport JavaScriptEmbedder from \"../core/embedders/JavaScriptEmbedder\";\n/**\n * Represents a PDF document.\n */\nvar PDFDocument = /** @class */ (function () {\n    function PDFDocument(context, ignoreEncryption, updateMetadata) {\n        var _this = this;\n        /** The default word breaks used in PDFPage.drawText */\n        this.defaultWordBreaks = [' '];\n        this.computePages = function () {\n            var pages = [];\n            _this.catalog.Pages().traverse(function (node, ref) {\n                if (node instanceof PDFPageLeaf) {\n                    var page = _this.pageMap.get(node);\n                    if (!page) {\n                        page = PDFPage.of(node, ref, _this);\n                        _this.pageMap.set(node, page);\n                    }\n                    pages.push(page);\n                }\n            });\n            return pages;\n        };\n        this.getOrCreateForm = function () {\n            var acroForm = _this.catalog.getOrCreateAcroForm();\n            return PDFForm.of(acroForm, _this);\n        };\n        assertIs(context, 'context', [[PDFContext, 'PDFContext']]);\n        assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n        this.context = context;\n        this.catalog = context.lookup(context.trailerInfo.Root);\n        this.isEncrypted = !!context.lookup(context.trailerInfo.Encrypt);\n        this.pageCache = Cache.populatedBy(this.computePages);\n        this.pageMap = new Map();\n        this.formCache = Cache.populatedBy(this.getOrCreateForm);\n        this.fonts = [];\n        this.images = [];\n        this.embeddedPages = [];\n        this.embeddedFiles = [];\n        this.javaScripts = [];\n        if (!ignoreEncryption && this.isEncrypted)\n            throw new EncryptedPDFError();\n        if (updateMetadata)\n            this.updateInfoDict();\n    }\n    /**\n     * Load an existing [[PDFDocument]]. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                               |\n     * | ------------- | ------------------------------------------------------ |\n     * | `string`      | A base64 encoded string (or data URI) containing a PDF |\n     * | `Uint8Array`  | The raw bytes of a PDF                                 |\n     * | `ArrayBuffer` | The raw bytes of a PDF                                 |\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     *\n     * // pdf=string\n     * const base64 =\n     *  'JVBERi0xLjcKJYGBgYEKCjUgMCBvYmoKPDwKL0ZpbHRlciAvRmxhdGVEZWNvZGUKL0xlbm' +\n     *  'd0aCAxMDQKPj4Kc3RyZWFtCniccwrhMlAAwaJ0Ln2P1Jyy1JLM5ERdc0MjCwUjE4WQNC4Q' +\n     *  '6cNlCFZkqGCqYGSqEJLLZWNuYGZiZmbkYuZsZmlmZGRgZmluDCQNzc3NTM2NzdzMXMxMjQ' +\n     *  'ztFEKyuEK0uFxDuAAOERdVCmVuZHN0cmVhbQplbmRvYmoKCjYgMCBvYmoKPDwKL0ZpbHRl' +\n     *  'ciAvRmxhdGVEZWNvZGUKL1R5cGUgL09ialN0bQovTiA0Ci9GaXJzdCAyMAovTGVuZ3RoID' +\n     *  'IxNQo+PgpzdHJlYW0KeJxVj9GqwjAMhu/zFHkBzTo3nCCCiiKIHPEICuJF3cKoSCu2E8/b' +\n     *  '20wPIr1p8v9/8kVhgilmGfawX2CGaVrgcAi0/bsy0lrX7IGWpvJ4iJYEN3gEmrrGBlQwGs' +\n     *  'HHO9VBX1wNrxAqMX87RBD5xpJuddqwd82tjAHxzV1U5LPgy52DKXWnr1Lheg+j/c/pzGVr' +\n     *  'iqV0VlwZPXGPCJjElw/ybkwUmeoWgxesDXGhHJC/D/iikp1Av80ptKU0FdBEe25pPihAM1' +\n     *  'u6ytgaaWfs2Hrz35CJT1+EWmAKZW5kc3RyZWFtCmVuZG9iagoKNyAwIG9iago8PAovU2l6' +\n     *  'ZSA4Ci9Sb290IDIgMCBSCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9UeXBlIC9YUmVmCi9MZW' +\n     *  '5ndGggMzgKL1cgWyAxIDIgMiBdCi9JbmRleCBbIDAgOCBdCj4+CnN0cmVhbQp4nBXEwREA' +\n     *  'EBAEsCwz3vrvRmOOyyOoGhZdutHN2MT55fIAVocD+AplbmRzdHJlYW0KZW5kb2JqCgpzdG' +\n     *  'FydHhyZWYKNTEwCiUlRU9G'\n     *\n     * const dataUri = 'data:application/pdf;base64,' + base64\n     *\n     * const pdfDoc1 = await PDFDocument.load(base64)\n     * const pdfDoc2 = await PDFDocument.load(dataUri)\n     *\n     * // pdf=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('with_update_sections.pdf')\n     * const pdfDoc3 = await PDFDocument.load(uint8Array)\n     *\n     * // pdf=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/with_update_sections.pdf'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const pdfDoc4 = await PDFDocument.load(arrayBuffer)\n     *\n     * ```\n     *\n     * @param pdf The input data containing a PDF document.\n     * @param options The options to be used when loading the document.\n     * @returns Resolves with a document loaded from the input.\n     */\n    PDFDocument.load = function (pdf, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, ignoreEncryption, _b, parseSpeed, _c, throwOnInvalidObject, _d, updateMetadata, _e, capNumbers, bytes, context;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        _a = options.ignoreEncryption, ignoreEncryption = _a === void 0 ? false : _a, _b = options.parseSpeed, parseSpeed = _b === void 0 ? ParseSpeeds.Slow : _b, _c = options.throwOnInvalidObject, throwOnInvalidObject = _c === void 0 ? false : _c, _d = options.updateMetadata, updateMetadata = _d === void 0 ? true : _d, _e = options.capNumbers, capNumbers = _e === void 0 ? false : _e;\n                        assertIs(pdf, 'pdf', ['string', Uint8Array, ArrayBuffer]);\n                        assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n                        assertIs(parseSpeed, 'parseSpeed', ['number']);\n                        assertIs(throwOnInvalidObject, 'throwOnInvalidObject', ['boolean']);\n                        bytes = toUint8Array(pdf);\n                        return [4 /*yield*/, PDFParser.forBytesWithOptions(bytes, parseSpeed, throwOnInvalidObject, capNumbers).parseDocument()];\n                    case 1:\n                        context = _f.sent();\n                        return [2 /*return*/, new PDFDocument(context, ignoreEncryption, updateMetadata)];\n                }\n            });\n        });\n    };\n    /**\n     * Create a new [[PDFDocument]].\n     * @returns Resolves with the newly created document.\n     */\n    PDFDocument.create = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, updateMetadata, context, pageTree, pageTreeRef, catalog;\n            return __generator(this, function (_b) {\n                _a = options.updateMetadata, updateMetadata = _a === void 0 ? true : _a;\n                context = PDFContext.create();\n                pageTree = PDFPageTree.withContext(context);\n                pageTreeRef = context.register(pageTree);\n                catalog = PDFCatalog.withContextAndPages(context, pageTreeRef);\n                context.trailerInfo.Root = context.register(catalog);\n                return [2 /*return*/, new PDFDocument(context, false, updateMetadata)];\n            });\n        });\n    };\n    /**\n     * Register a fontkit instance. This must be done before custom fonts can\n     * be embedded. See [here](https://github.com/Hopding/pdf-lib/tree/master#fontkit-installation)\n     * for instructions on how to install and register a fontkit instance.\n     *\n     * > You do **not** need to call this method to embed standard fonts.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     * import fontkit from '@pdf-lib/fontkit'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * pdfDoc.registerFontkit(fontkit)\n     * ```\n     *\n     * @param fontkit The fontkit instance to be registered.\n     */\n    PDFDocument.prototype.registerFontkit = function (fontkit) {\n        this.fontkit = fontkit;\n    };\n    /**\n     * Get the [[PDFForm]] containing all interactive fields for this document.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const type = field.constructor.name\n     *   const name = field.getName()\n     *   console.log(`${type}: ${name}`)\n     * })\n     * ```\n     * @returns The form for this document.\n     */\n    PDFDocument.prototype.getForm = function () {\n        var form = this.formCache.access();\n        if (form.hasXFA()) {\n            console.warn('Removing XFA form data as pdf-lib does not support reading or writing XFA');\n            form.deleteXFA();\n        }\n        return form;\n    };\n    /**\n     * Get this document's title metadata. The title appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const title = pdfDoc.getTitle()\n     * ```\n     * @returns A string containing the title of this document, if it has one.\n     */\n    PDFDocument.prototype.getTitle = function () {\n        var title = this.getInfoDict().lookup(PDFName.Title);\n        if (!title)\n            return undefined;\n        assertIsLiteralOrHexString(title);\n        return title.decodeText();\n    };\n    /**\n     * Get this document's author metadata. The author appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const author = pdfDoc.getAuthor()\n     * ```\n     * @returns A string containing the author of this document, if it has one.\n     */\n    PDFDocument.prototype.getAuthor = function () {\n        var author = this.getInfoDict().lookup(PDFName.Author);\n        if (!author)\n            return undefined;\n        assertIsLiteralOrHexString(author);\n        return author.decodeText();\n    };\n    /**\n     * Get this document's subject metadata. The subject appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const subject = pdfDoc.getSubject()\n     * ```\n     * @returns A string containing the subject of this document, if it has one.\n     */\n    PDFDocument.prototype.getSubject = function () {\n        var subject = this.getInfoDict().lookup(PDFName.Subject);\n        if (!subject)\n            return undefined;\n        assertIsLiteralOrHexString(subject);\n        return subject.decodeText();\n    };\n    /**\n     * Get this document's keywords metadata. The keywords appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const keywords = pdfDoc.getKeywords()\n     * ```\n     * @returns A string containing the keywords of this document, if it has any.\n     */\n    PDFDocument.prototype.getKeywords = function () {\n        var keywords = this.getInfoDict().lookup(PDFName.Keywords);\n        if (!keywords)\n            return undefined;\n        assertIsLiteralOrHexString(keywords);\n        return keywords.decodeText();\n    };\n    /**\n     * Get this document's creator metadata. The creator appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const creator = pdfDoc.getCreator()\n     * ```\n     * @returns A string containing the creator of this document, if it has one.\n     */\n    PDFDocument.prototype.getCreator = function () {\n        var creator = this.getInfoDict().lookup(PDFName.Creator);\n        if (!creator)\n            return undefined;\n        assertIsLiteralOrHexString(creator);\n        return creator.decodeText();\n    };\n    /**\n     * Get this document's producer metadata. The producer appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const producer = pdfDoc.getProducer()\n     * ```\n     * @returns A string containing the producer of this document, if it has one.\n     */\n    PDFDocument.prototype.getProducer = function () {\n        var producer = this.getInfoDict().lookup(PDFName.Producer);\n        if (!producer)\n            return undefined;\n        assertIsLiteralOrHexString(producer);\n        return producer.decodeText();\n    };\n    /**\n     * Get this document's creation date metadata. The creation date appears in\n     * the \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const creationDate = pdfDoc.getCreationDate()\n     * ```\n     * @returns A Date containing the creation date of this document,\n     *          if it has one.\n     */\n    PDFDocument.prototype.getCreationDate = function () {\n        var creationDate = this.getInfoDict().lookup(PDFName.CreationDate);\n        if (!creationDate)\n            return undefined;\n        assertIsLiteralOrHexString(creationDate);\n        return creationDate.decodeDate();\n    };\n    /**\n     * Get this document's modification date metadata. The modification date\n     * appears in the \"Document Properties\" section of most PDF readers.\n     * For example:\n     * ```js\n     * const modification = pdfDoc.getModificationDate()\n     * ```\n     * @returns A Date containing the modification date of this document,\n     *          if it has one.\n     */\n    PDFDocument.prototype.getModificationDate = function () {\n        var modificationDate = this.getInfoDict().lookup(PDFName.ModDate);\n        if (!modificationDate)\n            return undefined;\n        assertIsLiteralOrHexString(modificationDate);\n        return modificationDate.decodeDate();\n    };\n    /**\n     * Set this document's title metadata. The title will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setTitle('ðŸ¥š The Life of an Egg ðŸ³')\n     * ```\n     *\n     * To display the title in the window's title bar, set the\n     * `showInWindowTitleBar` option to `true` (works for _most_ PDF readers).\n     * For example:\n     * ```js\n     * pdfDoc.setTitle('ðŸ¥š The Life of an Egg ðŸ³', { showInWindowTitleBar: true })\n     * ```\n     *\n     * @param title The title of this document.\n     * @param options The options to be used when setting the title.\n     */\n    PDFDocument.prototype.setTitle = function (title, options) {\n        assertIs(title, 'title', ['string']);\n        var key = PDFName.of('Title');\n        this.getInfoDict().set(key, PDFHexString.fromText(title));\n        // Indicate that readers should display the title rather than the filename\n        if (options === null || options === void 0 ? void 0 : options.showInWindowTitleBar) {\n            var prefs = this.catalog.getOrCreateViewerPreferences();\n            prefs.setDisplayDocTitle(true);\n        }\n    };\n    /**\n     * Set this document's author metadata. The author will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setAuthor('Humpty Dumpty')\n     * ```\n     * @param author The author of this document.\n     */\n    PDFDocument.prototype.setAuthor = function (author) {\n        assertIs(author, 'author', ['string']);\n        var key = PDFName.of('Author');\n        this.getInfoDict().set(key, PDFHexString.fromText(author));\n    };\n    /**\n     * Set this document's subject metadata. The subject will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setSubject('ðŸ“˜ An Epic Tale of Woe ðŸ“–')\n     * ```\n     * @param subject The subject of this document.\n     */\n    PDFDocument.prototype.setSubject = function (subject) {\n        assertIs(subject, 'author', ['string']);\n        var key = PDFName.of('Subject');\n        this.getInfoDict().set(key, PDFHexString.fromText(subject));\n    };\n    /**\n     * Set this document's keyword metadata. These keywords will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setKeywords(['eggs', 'wall', 'fall', 'king', 'horses', 'men'])\n     * ```\n     * @param keywords An array of keywords associated with this document.\n     */\n    PDFDocument.prototype.setKeywords = function (keywords) {\n        assertIs(keywords, 'keywords', [Array]);\n        var key = PDFName.of('Keywords');\n        this.getInfoDict().set(key, PDFHexString.fromText(keywords.join(' ')));\n    };\n    /**\n     * Set this document's creator metadata. The creator will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setCreator('PDF App 9000 ðŸ¤–')\n     * ```\n     * @param creator The creator of this document.\n     */\n    PDFDocument.prototype.setCreator = function (creator) {\n        assertIs(creator, 'creator', ['string']);\n        var key = PDFName.of('Creator');\n        this.getInfoDict().set(key, PDFHexString.fromText(creator));\n    };\n    /**\n     * Set this document's producer metadata. The producer will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setProducer('PDF App 9000 ðŸ¤–')\n     * ```\n     * @param producer The producer of this document.\n     */\n    PDFDocument.prototype.setProducer = function (producer) {\n        assertIs(producer, 'creator', ['string']);\n        var key = PDFName.of('Producer');\n        this.getInfoDict().set(key, PDFHexString.fromText(producer));\n    };\n    /**\n     * Set this document's language metadata. The language will appear in the\n     * \"Document Properties\" section of some PDF readers. For example:\n     * ```js\n     * pdfDoc.setLanguage('en-us')\n     * ```\n     *\n     * @param language An RFC 3066 _Language-Tag_ denoting the language of this\n     *                 document, or an empty string if the language is unknown.\n     */\n    PDFDocument.prototype.setLanguage = function (language) {\n        assertIs(language, 'language', ['string']);\n        var key = PDFName.of('Lang');\n        this.catalog.set(key, PDFString.of(language));\n    };\n    /**\n     * Set this document's creation date metadata. The creation date will appear\n     * in the \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setCreationDate(new Date())\n     * ```\n     * @param creationDate The date this document was created.\n     */\n    PDFDocument.prototype.setCreationDate = function (creationDate) {\n        assertIs(creationDate, 'creationDate', [[Date, 'Date']]);\n        var key = PDFName.of('CreationDate');\n        this.getInfoDict().set(key, PDFString.fromDate(creationDate));\n    };\n    /**\n     * Set this document's modification date metadata. The modification date will\n     * appear in the \"Document Properties\" section of most PDF readers. For\n     * example:\n     * ```js\n     * pdfDoc.setModificationDate(new Date())\n     * ```\n     * @param modificationDate The date this document was last modified.\n     */\n    PDFDocument.prototype.setModificationDate = function (modificationDate) {\n        assertIs(modificationDate, 'modificationDate', [[Date, 'Date']]);\n        var key = PDFName.of('ModDate');\n        this.getInfoDict().set(key, PDFString.fromDate(modificationDate));\n    };\n    /**\n     * Get the number of pages contained in this document. For example:\n     * ```js\n     * const totalPages = pdfDoc.getPageCount()\n     * ```\n     * @returns The number of pages in this document.\n     */\n    PDFDocument.prototype.getPageCount = function () {\n        if (this.pageCount === undefined)\n            this.pageCount = this.getPages().length;\n        return this.pageCount;\n    };\n    /**\n     * Get an array of all the pages contained in this document. The pages are\n     * stored in the array in the same order that they are rendered in the\n     * document. For example:\n     * ```js\n     * const pages = pdfDoc.getPages()\n     * pages[0]   // The first page of the document\n     * pages[2]   // The third page of the document\n     * pages[197] // The 198th page of the document\n     * ```\n     * @returns An array of all the pages contained in this document.\n     */\n    PDFDocument.prototype.getPages = function () {\n        return this.pageCache.access();\n    };\n    /**\n     * Get the page rendered at a particular `index` of the document. For example:\n     * ```js\n     * pdfDoc.getPage(0)   // The first page of the document\n     * pdfDoc.getPage(2)   // The third page of the document\n     * pdfDoc.getPage(197) // The 198th page of the document\n     * ```\n     * @returns The [[PDFPage]] rendered at the given `index` of the document.\n     */\n    PDFDocument.prototype.getPage = function (index) {\n        var pages = this.getPages();\n        assertRange(index, 'index', 0, pages.length - 1);\n        return pages[index];\n    };\n    /**\n     * Get an array of indices for all the pages contained in this document. The\n     * array will contain a range of integers from\n     * `0..pdfDoc.getPageCount() - 1`. For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     * pdfDoc.addPage()\n     * pdfDoc.addPage()\n     * pdfDoc.addPage()\n     *\n     * const indices = pdfDoc.getPageIndices()\n     * indices // => [0, 1, 2]\n     * ```\n     * @returns An array of indices for all pages contained in this document.\n     */\n    PDFDocument.prototype.getPageIndices = function () {\n        return range(0, this.getPageCount());\n    };\n    /**\n     * Remove the page at a given index from this document. For example:\n     * ```js\n     * pdfDoc.removePage(0)   // Remove the first page of the document\n     * pdfDoc.removePage(2)   // Remove the third page of the document\n     * pdfDoc.removePage(197) // Remove the 198th page of the document\n     * ```\n     * Once a page has been removed, it will no longer be rendered at that index\n     * in the document.\n     * @param index The index of the page to be removed.\n     */\n    PDFDocument.prototype.removePage = function (index) {\n        var pageCount = this.getPageCount();\n        if (this.pageCount === 0)\n            throw new RemovePageFromEmptyDocumentError();\n        assertRange(index, 'index', 0, pageCount - 1);\n        this.catalog.removeLeafNode(index);\n        this.pageCount = pageCount - 1;\n    };\n    /**\n     * Add a page to the end of this document. This method accepts three\n     * different value types for the `page` parameter:\n     *\n     * | Type               | Behavior                                                                            |\n     * | ------------------ | ----------------------------------------------------------------------------------- |\n     * | `undefined`        | Create a new page and add it to the end of this document                            |\n     * | `[number, number]` | Create a new page with the given dimensions and add it to the end of this document  |\n     * | `PDFPage`          | Add the existing page to the end of this document                                   |\n     *\n     * For example:\n     * ```js\n     * // page=undefined\n     * const newPage = pdfDoc.addPage()\n     *\n     * // page=[number, number]\n     * import { PageSizes } from 'pdf-lib'\n     * const newPage1 = pdfDoc.addPage(PageSizes.A7)\n     * const newPage2 = pdfDoc.addPage(PageSizes.Letter)\n     * const newPage3 = pdfDoc.addPage([500, 750])\n     *\n     * // page=PDFPage\n     * const pdfDoc1 = await PDFDocument.create()\n     * const pdfDoc2 = await PDFDocument.load(...)\n     * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n     * pdfDoc1.addPage(existingPage)\n     * ```\n     *\n     * @param page Optionally, the desired dimensions or existing page.\n     * @returns The newly created (or existing) page.\n     */\n    PDFDocument.prototype.addPage = function (page) {\n        assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n        return this.insertPage(this.getPageCount(), page);\n    };\n    /**\n     * Insert a page at a given index within this document. This method accepts\n     * three different value types for the `page` parameter:\n     *\n     * | Type               | Behavior                                                                       |\n     * | ------------------ | ------------------------------------------------------------------------------ |\n     * | `undefined`        | Create a new page and insert it into this document                             |\n     * | `[number, number]` | Create a new page with the given dimensions and insert it into this document   |\n     * | `PDFPage`          | Insert the existing page into this document                                    |\n     *\n     * For example:\n     * ```js\n     * // page=undefined\n     * const newPage = pdfDoc.insertPage(2)\n     *\n     * // page=[number, number]\n     * import { PageSizes } from 'pdf-lib'\n     * const newPage1 = pdfDoc.insertPage(2, PageSizes.A7)\n     * const newPage2 = pdfDoc.insertPage(0, PageSizes.Letter)\n     * const newPage3 = pdfDoc.insertPage(198, [500, 750])\n     *\n     * // page=PDFPage\n     * const pdfDoc1 = await PDFDocument.create()\n     * const pdfDoc2 = await PDFDocument.load(...)\n     * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n     * pdfDoc1.insertPage(0, existingPage)\n     * ```\n     *\n     * @param index The index at which the page should be inserted (zero-based).\n     * @param page Optionally, the desired dimensions or existing page.\n     * @returns The newly created (or existing) page.\n     */\n    PDFDocument.prototype.insertPage = function (index, page) {\n        var pageCount = this.getPageCount();\n        assertRange(index, 'index', 0, pageCount);\n        assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n        if (!page || Array.isArray(page)) {\n            var dims = Array.isArray(page) ? page : PageSizes.A4;\n            page = PDFPage.create(this);\n            page.setSize.apply(page, dims);\n        }\n        else if (page.doc !== this) {\n            throw new ForeignPageError();\n        }\n        var parentRef = this.catalog.insertLeafNode(page.ref, index);\n        page.node.setParent(parentRef);\n        this.pageMap.set(page.node, page);\n        this.pageCache.invalidate();\n        this.pageCount = pageCount + 1;\n        return page;\n    };\n    /**\n     * Copy pages from a source document into this document. Allows pages to be\n     * copied between different [[PDFDocument]] instances. For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     * const srcDoc = await PDFDocument.load(...)\n     *\n     * const copiedPages = await pdfDoc.copyPages(srcDoc, [0, 3, 89])\n     * const [firstPage, fourthPage, ninetiethPage] = copiedPages;\n     *\n     * pdfDoc.addPage(fourthPage)\n     * pdfDoc.insertPage(0, ninetiethPage)\n     * pdfDoc.addPage(firstPage)\n     * ```\n     * @param srcDoc The document from which pages should be copied.\n     * @param indices The indices of the pages that should be copied.\n     * @returns Resolves with an array of pages copied into this document.\n     */\n    PDFDocument.prototype.copyPages = function (srcDoc, indices) {\n        return __awaiter(this, void 0, void 0, function () {\n            var copier, srcPages, copiedPages, idx, len, srcPage, copiedPage, ref;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(srcDoc, 'srcDoc', [[PDFDocument, 'PDFDocument']]);\n                        assertIs(indices, 'indices', [Array]);\n                        return [4 /*yield*/, srcDoc.flush()];\n                    case 1:\n                        _a.sent();\n                        copier = PDFObjectCopier.for(srcDoc.context, this.context);\n                        srcPages = srcDoc.getPages();\n                        copiedPages = new Array(indices.length);\n                        for (idx = 0, len = indices.length; idx < len; idx++) {\n                            srcPage = srcPages[indices[idx]];\n                            copiedPage = copier.copy(srcPage.node);\n                            ref = this.context.register(copiedPage);\n                            copiedPages[idx] = PDFPage.of(copiedPage, ref, this);\n                        }\n                        return [2 /*return*/, copiedPages];\n                }\n            });\n        });\n    };\n    /**\n     * Get a copy of this document.\n     *\n     * For example:\n     * ```js\n     * const srcDoc = await PDFDocument.load(...)\n     * const pdfDoc = await srcDoc.copy()\n     * ```\n     *\n     * > **NOTE:**  This method won't copy all information over to the new\n     * > document (acroforms, outlines, etc...).\n     *\n     * @returns Resolves with a copy this document.\n     */\n    PDFDocument.prototype.copy = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var pdfCopy, contentPages, idx, len;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, PDFDocument.create()];\n                    case 1:\n                        pdfCopy = _a.sent();\n                        return [4 /*yield*/, pdfCopy.copyPages(this, this.getPageIndices())];\n                    case 2:\n                        contentPages = _a.sent();\n                        for (idx = 0, len = contentPages.length; idx < len; idx++) {\n                            pdfCopy.addPage(contentPages[idx]);\n                        }\n                        if (this.getAuthor() !== undefined) {\n                            pdfCopy.setAuthor(this.getAuthor());\n                        }\n                        if (this.getCreationDate() !== undefined) {\n                            pdfCopy.setCreationDate(this.getCreationDate());\n                        }\n                        if (this.getCreator() !== undefined) {\n                            pdfCopy.setCreator(this.getCreator());\n                        }\n                        if (this.getModificationDate() !== undefined) {\n                            pdfCopy.setModificationDate(this.getModificationDate());\n                        }\n                        if (this.getProducer() !== undefined) {\n                            pdfCopy.setProducer(this.getProducer());\n                        }\n                        if (this.getSubject() !== undefined) {\n                            pdfCopy.setSubject(this.getSubject());\n                        }\n                        if (this.getTitle() !== undefined) {\n                            pdfCopy.setTitle(this.getTitle());\n                        }\n                        pdfCopy.defaultWordBreaks = this.defaultWordBreaks;\n                        return [2 /*return*/, pdfCopy];\n                }\n            });\n        });\n    };\n    /**\n     * Add JavaScript to this document. The supplied `script` is executed when the\n     * document is opened. The `script` can be used to perform some operation\n     * when the document is opened (e.g. logging to the console), or it can be\n     * used to define a function that can be referenced later in a JavaScript\n     * action. For example:\n     * ```js\n     * // Show \"Hello World!\" in the console when the PDF is opened\n     * pdfDoc.addJavaScript(\n     *   'main',\n     *   'console.show(); console.println(\"Hello World!\");'\n     * );\n     *\n     * // Define a function named \"foo\" that can be called in JavaScript Actions\n     * pdfDoc.addJavaScript(\n     *   'foo',\n     *   'function foo() { return \"foo\"; }'\n     * );\n     * ```\n     * See the [JavaScript for Acrobat API Reference](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/js_api_reference.pdf)\n     * for details.\n     * @param name The name of the script. Must be unique per document.\n     * @param script The JavaScript to execute.\n     */\n    PDFDocument.prototype.addJavaScript = function (name, script) {\n        assertIs(name, 'name', ['string']);\n        assertIs(script, 'script', ['string']);\n        var embedder = JavaScriptEmbedder.for(script, name);\n        var ref = this.context.nextRef();\n        var javaScript = PDFJavaScript.of(ref, this, embedder);\n        this.javaScripts.push(javaScript);\n    };\n    /**\n     * Add an attachment to this document. Attachments are visible in the\n     * \"Attachments\" panel of Adobe Acrobat and some other PDF readers. Any\n     * type of file can be added as an attachment. This includes, but is not\n     * limited to, `.png`, `.jpg`, `.pdf`, `.csv`, `.docx`, and `.xlsx` files.\n     *\n     * The input data can be provided in multiple formats:\n     *\n     * | Type          | Contents                                                       |\n     * | ------------- | -------------------------------------------------------------- |\n     * | `string`      | A base64 encoded string (or data URI) containing an attachment |\n     * | `Uint8Array`  | The raw bytes of an attachment                                 |\n     * | `ArrayBuffer` | The raw bytes of an attachment                                 |\n     *\n     * For example:\n     * ```js\n     * // attachment=string\n     * await pdfDoc.attach('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...', 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     * await pdfDoc.attach('data:image/jpeg;base64,/9j/4AAQ...', 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     *\n     * // attachment=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n     * await pdfDoc.attach(uint8Array, 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     *\n     * // attachment=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * await pdfDoc.attach(arrayBuffer, 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     * ```\n     *\n     * @param attachment The input data containing the file to be attached.\n     * @param name The name of the file to be attached.\n     * @returns Resolves when the attachment is complete.\n     */\n    PDFDocument.prototype.attach = function (attachment, name, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, embeddedFile;\n            return __generator(this, function (_a) {\n                assertIs(attachment, 'attachment', ['string', Uint8Array, ArrayBuffer]);\n                assertIs(name, 'name', ['string']);\n                assertOrUndefined(options.mimeType, 'mimeType', ['string']);\n                assertOrUndefined(options.description, 'description', ['string']);\n                assertOrUndefined(options.creationDate, 'options.creationDate', [Date]);\n                assertOrUndefined(options.modificationDate, 'options.modificationDate', [\n                    Date,\n                ]);\n                assertIsOneOfOrUndefined(options.afRelationship, 'options.afRelationship', AFRelationship);\n                bytes = toUint8Array(attachment);\n                embedder = FileEmbedder.for(bytes, name, options);\n                ref = this.context.nextRef();\n                embeddedFile = PDFEmbeddedFile.of(ref, this, embedder);\n                this.embeddedFiles.push(embeddedFile);\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Embed a font into this document. The input data can be provided in multiple\n     * formats:\n     *\n     * | Type            | Contents                                                |\n     * | --------------- | ------------------------------------------------------- |\n     * | `StandardFonts` | One of the standard 14 fonts                            |\n     * | `string`        | A base64 encoded string (or data URI) containing a font |\n     * | `Uint8Array`    | The raw bytes of a font                                 |\n     * | `ArrayBuffer`   | The raw bytes of a font                                 |\n     *\n     * For example:\n     * ```js\n     * // font=StandardFonts\n     * import { StandardFonts } from 'pdf-lib'\n     * const font1 = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     *\n     * // font=string\n     * const font2 = await pdfDoc.embedFont('AAEAAAAVAQAABABQRFNJRx/upe...')\n     * const font3 = await pdfDoc.embedFont('data:font/opentype;base64,AAEAAA...')\n     *\n     * // font=Uint8Array\n     * import fs from 'fs'\n     * const font4 = await pdfDoc.embedFont(fs.readFileSync('Ubuntu-R.ttf'))\n     *\n     * // font=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/ubuntu/Ubuntu-R.ttf'\n     * const ubuntuBytes = await fetch(url).then(res => res.arrayBuffer())\n     * const font5 = await pdfDoc.embedFont(ubuntuBytes)\n     * ```\n     * See also: [[registerFontkit]]\n     * @param font The input data for a font.\n     * @param options The options to be used when embedding the font.\n     * @returns Resolves with the embedded font.\n     */\n    PDFDocument.prototype.embedFont = function (font, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, subset, customName, features, embedder, bytes, fontkit, _b, ref, pdfFont;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = options.subset, subset = _a === void 0 ? false : _a, customName = options.customName, features = options.features;\n                        assertIs(font, 'font', ['string', Uint8Array, ArrayBuffer]);\n                        assertIs(subset, 'subset', ['boolean']);\n                        if (!isStandardFont(font)) return [3 /*break*/, 1];\n                        embedder = StandardFontEmbedder.for(font, customName);\n                        return [3 /*break*/, 7];\n                    case 1:\n                        if (!canBeConvertedToUint8Array(font)) return [3 /*break*/, 6];\n                        bytes = toUint8Array(font);\n                        fontkit = this.assertFontkit();\n                        if (!subset) return [3 /*break*/, 3];\n                        return [4 /*yield*/, CustomFontSubsetEmbedder.for(fontkit, bytes, customName, features)];\n                    case 2:\n                        _b = _c.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, CustomFontEmbedder.for(fontkit, bytes, customName, features)];\n                    case 4:\n                        _b = _c.sent();\n                        _c.label = 5;\n                    case 5:\n                        embedder = _b;\n                        return [3 /*break*/, 7];\n                    case 6: throw new TypeError('`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`');\n                    case 7:\n                        ref = this.context.nextRef();\n                        pdfFont = PDFFont.of(ref, this, embedder);\n                        this.fonts.push(pdfFont);\n                        return [2 /*return*/, pdfFont];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a standard font into this document.\n     * For example:\n     * ```js\n     * import { StandardFonts } from 'pdf-lib'\n     * const helveticaFont = pdfDoc.embedFont(StandardFonts.Helvetica)\n     * ```\n     * @param font The standard font to be embedded.\n     * @param customName The name to be used when embedding the font.\n     * @returns The embedded font.\n     */\n    PDFDocument.prototype.embedStandardFont = function (font, customName) {\n        assertIs(font, 'font', ['string']);\n        if (!isStandardFont(font)) {\n            throw new TypeError('`font` must be one of type `StandardFonts`');\n        }\n        var embedder = StandardFontEmbedder.for(font, customName);\n        var ref = this.context.nextRef();\n        var pdfFont = PDFFont.of(ref, this, embedder);\n        this.fonts.push(pdfFont);\n        return pdfFont;\n    };\n    /**\n     * Embed a JPEG image into this document. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                                      |\n     * | ------------- | ------------------------------------------------------------- |\n     * | `string`      | A base64 encoded string (or data URI) containing a JPEG image |\n     * | `Uint8Array`  | The raw bytes of a JPEG image                                 |\n     * | `ArrayBuffer` | The raw bytes of a JPEG image                                 |\n     *\n     * For example:\n     * ```js\n     * // jpg=string\n     * const image1 = await pdfDoc.embedJpg('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...')\n     * const image2 = await pdfDoc.embedJpg('data:image/jpeg;base64,/9j/4AAQ...')\n     *\n     * // jpg=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n     * const image3 = await pdfDoc.embedJpg(uint8Array)\n     *\n     * // jpg=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const image4 = await pdfDoc.embedJpg(arrayBuffer)\n     * ```\n     *\n     * @param jpg The input data for a JPEG image.\n     * @returns Resolves with the embedded image.\n     */\n    PDFDocument.prototype.embedJpg = function (jpg) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, pdfImage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(jpg, 'jpg', ['string', Uint8Array, ArrayBuffer]);\n                        bytes = toUint8Array(jpg);\n                        return [4 /*yield*/, JpegEmbedder.for(bytes)];\n                    case 1:\n                        embedder = _a.sent();\n                        ref = this.context.nextRef();\n                        pdfImage = PDFImage.of(ref, this, embedder);\n                        this.images.push(pdfImage);\n                        return [2 /*return*/, pdfImage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a PNG image into this document. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                                     |\n     * | ------------- | ------------------------------------------------------------ |\n     * | `string`      | A base64 encoded string (or data URI) containing a PNG image |\n     * | `Uint8Array`  | The raw bytes of a PNG image                                 |\n     * | `ArrayBuffer` | The raw bytes of a PNG image                                 |\n     *\n     * For example:\n     * ```js\n     * // png=string\n     * const image1 = await pdfDoc.embedPng('iVBORw0KGgoAAAANSUhEUgAAAlgAAAF3...')\n     * const image2 = await pdfDoc.embedPng('data:image/png;base64,iVBORw0KGg...')\n     *\n     * // png=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('small_mario.png')\n     * const image3 = await pdfDoc.embedPng(uint8Array)\n     *\n     * // png=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/small_mario.png'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const image4 = await pdfDoc.embedPng(arrayBuffer)\n     * ```\n     *\n     * @param png The input data for a PNG image.\n     * @returns Resolves with the embedded image.\n     */\n    PDFDocument.prototype.embedPng = function (png) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, pdfImage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(png, 'png', ['string', Uint8Array, ArrayBuffer]);\n                        bytes = toUint8Array(png);\n                        return [4 /*yield*/, PngEmbedder.for(bytes)];\n                    case 1:\n                        embedder = _a.sent();\n                        ref = this.context.nextRef();\n                        pdfImage = PDFImage.of(ref, this, embedder);\n                        this.images.push(pdfImage);\n                        return [2 /*return*/, pdfImage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed one or more PDF pages into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourcePdf = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     *\n     * // Embed page 74 of `sourcePdf` into `pdfDoc`\n     * const [embeddedPage] = await pdfDoc.embedPdf(sourcePdf, [73])\n     * ```\n     *\n     * See [[PDFDocument.load]] for examples of the allowed input data formats.\n     *\n     * @param pdf The input data containing a PDF document.\n     * @param indices The indices of the pages that should be embedded.\n     * @returns Resolves with an array of the embedded pages.\n     */\n    PDFDocument.prototype.embedPdf = function (pdf, indices) {\n        if (indices === void 0) { indices = [0]; }\n        return __awaiter(this, void 0, void 0, function () {\n            var srcDoc, _a, srcPages;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        assertIs(pdf, 'pdf', [\n                            'string',\n                            Uint8Array,\n                            ArrayBuffer,\n                            [PDFDocument, 'PDFDocument'],\n                        ]);\n                        assertIs(indices, 'indices', [Array]);\n                        if (!(pdf instanceof PDFDocument)) return [3 /*break*/, 1];\n                        _a = pdf;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, PDFDocument.load(pdf)];\n                    case 2:\n                        _a = _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        srcDoc = _a;\n                        srcPages = pluckIndices(srcDoc.getPages(), indices);\n                        return [2 /*return*/, this.embedPages(srcPages)];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a single PDF page into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n     * const sourcePdfPage = sourcePdfDoc.getPages()[73]\n     *\n     * const embeddedPage = await pdfDoc.embedPage(\n     *   sourcePdfPage,\n     *\n     *   // Clip a section of the source page so that we only embed part of it\n     *   { left: 100, right: 450, bottom: 330, top: 570 },\n     *\n     *   // Translate all drawings of the embedded page by (10, 200) units\n     *   [1, 0, 0, 1, 10, 200],\n     * )\n     * ```\n     *\n     * @param page The page to be embedded.\n     * @param boundingBox\n     * Optionally, an area of the source page that should be embedded\n     * (defaults to entire page).\n     * @param transformationMatrix\n     * Optionally, a transformation matrix that is always applied to the embedded\n     * page anywhere it is drawn.\n     * @returns Resolves with the embedded pdf page.\n     */\n    PDFDocument.prototype.embedPage = function (page, boundingBox, transformationMatrix) {\n        return __awaiter(this, void 0, void 0, function () {\n            var embeddedPage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n                        return [4 /*yield*/, this.embedPages([page], [boundingBox], [transformationMatrix])];\n                    case 1:\n                        embeddedPage = (_a.sent())[0];\n                        return [2 /*return*/, embeddedPage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed one or more PDF pages into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n     *\n     * const page1 = sourcePdfDoc.getPages()[0]\n     * const page2 = sourcePdfDoc.getPages()[52]\n     * const page3 = sourcePdfDoc.getPages()[73]\n     *\n     * const embeddedPages = await pdfDoc.embedPages([page1, page2, page3])\n     * ```\n     *\n     * @param page\n     * The pages to be embedded (they must all share the same context).\n     * @param boundingBoxes\n     * Optionally, an array of clipping boundaries - one for each page\n     * (defaults to entirety of each page).\n     * @param transformationMatrices\n     * Optionally, an array of transformation matrices - one for each page\n     * (each page's transformation will apply anywhere it is drawn).\n     * @returns Resolves with an array of the embedded pdf pages.\n     */\n    PDFDocument.prototype.embedPages = function (pages, boundingBoxes, transformationMatrices) {\n        if (boundingBoxes === void 0) { boundingBoxes = []; }\n        if (transformationMatrices === void 0) { transformationMatrices = []; }\n        return __awaiter(this, void 0, void 0, function () {\n            var idx, len, currPage, nextPage, context, maybeCopyPage, embeddedPages, idx, len, page, box, matrix, embedder, ref;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (pages.length === 0)\n                            return [2 /*return*/, []];\n                        // Assert all pages have the same context\n                        for (idx = 0, len = pages.length - 1; idx < len; idx++) {\n                            currPage = pages[idx];\n                            nextPage = pages[idx + 1];\n                            if (currPage.node.context !== nextPage.node.context) {\n                                throw new PageEmbeddingMismatchedContextError();\n                            }\n                        }\n                        context = pages[0].node.context;\n                        maybeCopyPage = context === this.context\n                            ? function (p) { return p; }\n                            : PDFObjectCopier.for(context, this.context).copy;\n                        embeddedPages = new Array(pages.length);\n                        idx = 0, len = pages.length;\n                        _b.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        page = maybeCopyPage(pages[idx].node);\n                        box = boundingBoxes[idx];\n                        matrix = transformationMatrices[idx];\n                        return [4 /*yield*/, PDFPageEmbedder.for(page, box, matrix)];\n                    case 2:\n                        embedder = _b.sent();\n                        ref = this.context.nextRef();\n                        embeddedPages[idx] = PDFEmbeddedPage.of(ref, this, embedder);\n                        _b.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        (_a = this.embeddedPages).push.apply(_a, embeddedPages);\n                        return [2 /*return*/, embeddedPages];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You shouldn't need to call this method directly. The [[save]]\n     * > and [[saveAsBase64]] methods will automatically ensure that all embedded\n     * > assets are flushed before serializing the document.\n     *\n     * Flush all embedded fonts, PDF pages, and images to this document's\n     * [[context]].\n     *\n     * @returns Resolves when the flush is complete.\n     */\n    PDFDocument.prototype.flush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedAll(this.fonts)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.images)];\n                    case 2:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.embeddedPages)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.embeddedFiles)];\n                    case 4:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.javaScripts)];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Serialize this document to an array of bytes making up a PDF file.\n     * For example:\n     * ```js\n     * const pdfBytes = await pdfDoc.save()\n     * ```\n     *\n     * There are a number of things you can do with the serialized document,\n     * depending on the JavaScript environment you're running in:\n     * * Write it to a file in Node or React Native\n     * * Download it as a Blob in the browser\n     * * Render it in an `iframe`\n     *\n     * @param options The options to be used when saving the document.\n     * @returns Resolves with the bytes of the serialized document.\n     */\n    PDFDocument.prototype.save = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, useObjectStreams, _b, addDefaultPage, _c, objectsPerTick, _d, updateFieldAppearances, form, Writer;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        _a = options.useObjectStreams, useObjectStreams = _a === void 0 ? true : _a, _b = options.addDefaultPage, addDefaultPage = _b === void 0 ? true : _b, _c = options.objectsPerTick, objectsPerTick = _c === void 0 ? 50 : _c, _d = options.updateFieldAppearances, updateFieldAppearances = _d === void 0 ? true : _d;\n                        assertIs(useObjectStreams, 'useObjectStreams', ['boolean']);\n                        assertIs(addDefaultPage, 'addDefaultPage', ['boolean']);\n                        assertIs(objectsPerTick, 'objectsPerTick', ['number']);\n                        assertIs(updateFieldAppearances, 'updateFieldAppearances', ['boolean']);\n                        if (addDefaultPage && this.getPageCount() === 0)\n                            this.addPage();\n                        if (updateFieldAppearances) {\n                            form = this.formCache.getValue();\n                            if (form)\n                                form.updateFieldAppearances();\n                        }\n                        return [4 /*yield*/, this.flush()];\n                    case 1:\n                        _e.sent();\n                        Writer = useObjectStreams ? PDFStreamWriter : PDFWriter;\n                        return [2 /*return*/, Writer.forContext(this.context, objectsPerTick).serializeToBuffer()];\n                }\n            });\n        });\n    };\n    /**\n     * Serialize this document to a base64 encoded string or data URI making up a\n     * PDF file. For example:\n     * ```js\n     * const base64String = await pdfDoc.saveAsBase64()\n     * base64String // => 'JVBERi0xLjcKJYGBgYEKC...'\n     *\n     * const base64DataUri = await pdfDoc.saveAsBase64({ dataUri: true })\n     * base64DataUri // => 'data:application/pdf;base64,JVBERi0xLjcKJYGBgYEKC...'\n     * ```\n     *\n     * @param options The options to be used when saving the document.\n     * @returns Resolves with a base64 encoded string or data URI of the\n     *          serialized document.\n     */\n    PDFDocument.prototype.saveAsBase64 = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, dataUri, otherOptions, bytes, base64;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = options.dataUri, dataUri = _a === void 0 ? false : _a, otherOptions = __rest(options, [\"dataUri\"]);\n                        assertIs(dataUri, 'dataUri', ['boolean']);\n                        return [4 /*yield*/, this.save(otherOptions)];\n                    case 1:\n                        bytes = _b.sent();\n                        base64 = encodeToBase64(bytes);\n                        return [2 /*return*/, dataUri ? \"data:application/pdf;base64,\" + base64 : base64];\n                }\n            });\n        });\n    };\n    PDFDocument.prototype.findPageForAnnotationRef = function (ref) {\n        var pages = this.getPages();\n        for (var idx = 0, len = pages.length; idx < len; idx++) {\n            var page = pages[idx];\n            var annotations = page.node.Annots();\n            if ((annotations === null || annotations === void 0 ? void 0 : annotations.indexOf(ref)) !== undefined) {\n                return page;\n            }\n        }\n        return undefined;\n    };\n    PDFDocument.prototype.embedAll = function (embeddables) {\n        return __awaiter(this, void 0, void 0, function () {\n            var idx, len;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        idx = 0, len = embeddables.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, embeddables[idx].embed()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFDocument.prototype.updateInfoDict = function () {\n        var pdfLib = \"pdf-lib (https://github.com/Hopding/pdf-lib)\";\n        var now = new Date();\n        var info = this.getInfoDict();\n        this.setProducer(pdfLib);\n        this.setModificationDate(now);\n        if (!info.get(PDFName.of('Creator')))\n            this.setCreator(pdfLib);\n        if (!info.get(PDFName.of('CreationDate')))\n            this.setCreationDate(now);\n    };\n    PDFDocument.prototype.getInfoDict = function () {\n        var existingInfo = this.context.lookup(this.context.trailerInfo.Info);\n        if (existingInfo instanceof PDFDict)\n            return existingInfo;\n        var newInfo = this.context.obj({});\n        this.context.trailerInfo.Info = this.context.register(newInfo);\n        return newInfo;\n    };\n    PDFDocument.prototype.assertFontkit = function () {\n        if (!this.fontkit)\n            throw new FontkitNotRegisteredError();\n        return this.fontkit;\n    };\n    return PDFDocument;\n}());\nexport default PDFDocument;\n/* tslint:disable-next-line only-arrow-functions */\nfunction assertIsLiteralOrHexString(pdfObject) {\n    if (!(pdfObject instanceof PDFHexString) &&\n        !(pdfObject instanceof PDFString)) {\n        throw new UnexpectedObjectTypeError([PDFHexString, PDFString], pdfObject);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { PNG } from \"../../utils/png\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/png.coffee\n */\nvar PngEmbedder = /** @class */function () {\n  function PngEmbedder(png) {\n    this.image = png;\n    this.bitsPerComponent = png.bitsPerComponent;\n    this.width = png.width;\n    this.height = png.height;\n    this.colorSpace = 'DeviceRGB';\n  }\n  PngEmbedder.for = function (imageData) {\n    return __awaiter(this, void 0, void 0, function () {\n      var png;\n      return __generator(this, function (_a) {\n        png = PNG.load(imageData);\n        return [2 /*return*/, new PngEmbedder(png)];\n      });\n    });\n  };\n  PngEmbedder.prototype.embedIntoContext = function (context, ref) {\n    return __awaiter(this, void 0, void 0, function () {\n      var SMask, xObject;\n      return __generator(this, function (_a) {\n        SMask = this.embedAlphaChannel(context);\n        xObject = context.flateStream(this.image.rgbChannel, {\n          Type: 'XObject',\n          Subtype: 'Image',\n          BitsPerComponent: this.image.bitsPerComponent,\n          Width: this.image.width,\n          Height: this.image.height,\n          ColorSpace: this.colorSpace,\n          SMask: SMask\n        });\n        if (ref) {\n          context.assign(ref, xObject);\n          return [2 /*return*/, ref];\n        } else {\n          return [2 /*return*/, context.register(xObject)];\n        }\n        return [2 /*return*/];\n      });\n    });\n  };\n\n  PngEmbedder.prototype.embedAlphaChannel = function (context) {\n    if (!this.image.alphaChannel) return undefined;\n    var xObject = context.flateStream(this.image.alphaChannel, {\n      Type: 'XObject',\n      Subtype: 'Image',\n      Height: this.image.height,\n      Width: this.image.width,\n      BitsPerComponent: this.image.bitsPerComponent,\n      ColorSpace: 'DeviceGray',\n      Decode: [0, 1]\n    });\n    return context.register(xObject);\n  };\n  return PngEmbedder;\n}();\nexport default PngEmbedder;","map":{"version":3,"names":["__awaiter","__generator","PNG","PngEmbedder","png","image","bitsPerComponent","width","height","colorSpace","for","imageData","_a","load","prototype","embedIntoContext","context","ref","SMask","xObject","embedAlphaChannel","flateStream","rgbChannel","Type","Subtype","BitsPerComponent","Width","Height","ColorSpace","assign","register","alphaChannel","undefined","Decode"],"sources":["E:/PROA/frontPROA/node_modules/pdf-lib/es/core/embedders/PngEmbedder.js"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nimport { PNG } from \"../../utils/png\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/png.coffee\n */\nvar PngEmbedder = /** @class */ (function () {\n    function PngEmbedder(png) {\n        this.image = png;\n        this.bitsPerComponent = png.bitsPerComponent;\n        this.width = png.width;\n        this.height = png.height;\n        this.colorSpace = 'DeviceRGB';\n    }\n    PngEmbedder.for = function (imageData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var png;\n            return __generator(this, function (_a) {\n                png = PNG.load(imageData);\n                return [2 /*return*/, new PngEmbedder(png)];\n            });\n        });\n    };\n    PngEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var SMask, xObject;\n            return __generator(this, function (_a) {\n                SMask = this.embedAlphaChannel(context);\n                xObject = context.flateStream(this.image.rgbChannel, {\n                    Type: 'XObject',\n                    Subtype: 'Image',\n                    BitsPerComponent: this.image.bitsPerComponent,\n                    Width: this.image.width,\n                    Height: this.image.height,\n                    ColorSpace: this.colorSpace,\n                    SMask: SMask,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    PngEmbedder.prototype.embedAlphaChannel = function (context) {\n        if (!this.image.alphaChannel)\n            return undefined;\n        var xObject = context.flateStream(this.image.alphaChannel, {\n            Type: 'XObject',\n            Subtype: 'Image',\n            Height: this.image.height,\n            Width: this.image.width,\n            BitsPerComponent: this.image.bitsPerComponent,\n            ColorSpace: 'DeviceGray',\n            Decode: [0, 1],\n        });\n        return context.register(xObject);\n    };\n    return PngEmbedder;\n}());\nexport default PngEmbedder;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}